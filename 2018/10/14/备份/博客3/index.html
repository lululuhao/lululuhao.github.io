
<!DOCTYPE html>
<html lang="" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Apologize</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="LH,"> 
    
    <meta name="author" content="lululuhao"> 
    <link rel="alternative" href="atom.xml" title="Apologize" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link rel="stylesheet" href="/css/diaspora.css">
</head>

<body class="loading">
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;"></a>
    <div title="播放/暂停" class="icon-play"></div>
    <h3 class="subtitle">文本处理及文件查找</h3>
    <div class="social">
        <!--<div class="like-icon">-->
            <!--<a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
        <!--</div>-->
        <div>
            <div class="share">
                <a title="获取二维码" class="icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>
    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">文本处理及文件查找</h1>
        <div class="stuff">
            <span>十月 14, 2018</span>
            
  <ul class="post-tags-list"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/Find/">Find</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/Sed/">Sed</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/VIM/">VIM</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/shell脚本/">shell脚本</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/正则表达式/">正则表达式</a></li></ul>


        </div>
        <div class="content markdown">
            <h1 id="文本处理及正则表达式"><a href="#文本处理及正则表达式" class="headerlink" title="文本处理及正则表达式"></a>文本处理及正则表达式</h1><h3 id="文件查看"><a href="#文件查看" class="headerlink" title="文件查看"></a>文件查看</h3><p>文件查看命令：<br>cat，tac，rev<br>cat [OPTION]… [FILE]…<br>-E：显示行结束符$<br>-n：对显示出的每一行进行编号<br>-A：显示所有控制符<br>-b：非空行编号<br>-s：压缩连续的空行成一行<br>tac<br>rev<br>文件查看<br>more: 分页查看文件<br>more [OPTIONS…] FILE…<br>-d: 显示翻页及退出提示<br>less：一页一页地查看文件或STDIN输出<br>查看时有用的命令包括：<br>/文本搜索文本<br>n/N跳到下一个或上一个匹配<br>less命令是man命令使用的分页器  </p>
<h3 id="显示文本前或后行内容"><a href="#显示文本前或后行内容" class="headerlink" title="显示文本前或后行内容*"></a>显示文本前或后行内容<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></h3><p>head [OPTION]… [FILE]…<br>-c #: 指定获取前#字节<br>-n #: 指定获取前#行<br>-#：指定行数<br>tail [OPTION]… [FILE]…<br>-c #: 指定获取后#字节<br>-n #: 指定获取后#行<br>-#：同上<br>-f: 跟踪显示文件fd新追加的内容,常用日志监控<br>相当于–follow=descriptor<br>-F: 跟踪文件名，相当于–follow=name –retry<br>tailf类似tail –f，当文件不增长时并不访问文件  </p>
<p>###按列抽取文本cut和合并文件paste<strong><strong><strong><strong><strong><strong><strong><strong><strong>***</strong></strong></strong></strong></strong></strong></strong></strong></strong>CUT<br>cut [OPTION]… [FILE]…<br>-d DELIMITER: 指明分隔符，默认tab<br>-f FILEDS:<br>…#: 第#个字段<br>…#,#[,#]：离散的多个字段，例如1,3,6<br>…#-#：连续的多个字段, 例如1-6<br>混合使用：1-3,7<br>-c按字符切割<br>–output-delimiter=STRING指定输出分隔符<br>cut和paste<br>显示文件或STDIN数据的指定列<br>cut-d:-f1/etc/passwd<br>cat /etc/passwd|cut-d:-f7<br>cut-c2-5/usr/share/dict/words<br>paste 合并两个文件同行号的列到一行<br>paste [OPTION]… [FILE]…<br>-d 分隔符：指定分隔符，默认用TAB<br>-s : 所有行合成一行显示<br>示例：<br>paste f1 f2<br>paste -s f1 f2</p>
<h3 id="收集文本统计数据wc-WC"><a href="#收集文本统计数据wc-WC" class="headerlink" title="收集文本统计数据wc*WC"></a>收集文本统计数据wc<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>WC</h3><p>计数单词总数、行总数、字节总数和字符总数<br>可以对文件或STDIN中的数据运行<br>wcstory.txt<br>392371901story.txt<br>行数字数字节数<br>常用选项  </p>
<blockquote>
<p>-l只计数行数<br>-w只计数单词总数<br>-c只计数字节总数<br>-m只计数字符总数<br>-L显示文件中最长行的长度  </p>
</blockquote>
<h3 id="文本排序sort"><a href="#文本排序sort" class="headerlink" title="文本排序sort"></a>文本排序sort</h3><p>把整理过的文本显示在STDOUT，不改变原始文件<br>sort[options]file(s)<br>常用选项  </p>
<blockquote>
<p>-r执行反方向（由上至下）整理<br>-R随机排序<br>-n执行按数字大小整理<br>-f选项忽略（fold）字符串中的字符大小写<br>-u选项（独特，unique）删除输出中的重复行<br>-t c选项使用c做为字段界定符<br>-k X选项按照使用c字符分隔的X列来整理能够使用多次  </p>
</blockquote>
<h3 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h3><p>uniq命令：从输入中删除前后相接的重复的行<br>uniq[OPTION]… [FILE]…<br>-c: 显示每行重复出现的次数<br>-d: 仅显示重复过的行<br>-u: 仅显示不曾重复的行<br>注：连续且完全相同方为重复<br>常和sort 命令一起配合使用：<br>sort userlist.txt | uniq-c  </p>
<h3 id="比较文件"><a href="#比较文件" class="headerlink" title="比较文件"></a>比较文件</h3><p>比较两个文件之间的区别<br>difffoo.conffoo2.conf<br>5c5<br>&lt; use_widgets=no<br>.&gt;use_widgets=yes<br>注明第5行有区别（改变）</p>
<h2 id="取出IP地址的几种方法：-（重点）"><a href="#取出IP地址的几种方法：-（重点）" class="headerlink" title="取出IP地址的几种方法： *（重点）"></a>取出IP地址的几种方法： <strong><strong><strong><strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong></strong></strong></strong>（重点）</h2><blockquote>
<p>ifconfig | sed -r ‘2!d;s/.<em>inet (addr:)?//;s/ .</em>//‘  6和7通用的取出IP地址<br>ifconfig eth0 | head -2|tail -1| tr -dc ‘[0-9]. ‘ |tr -s ‘ ‘ |cut -d” “ -f2   6系统上<br>ifconfig eth0|sed -n ‘2p’|sed ‘s@.<em>inet @@’|sed ‘s@ netmask.$@@’ 提取出7上的IP地址，其中@@为分隔符<br>ifconfig ens33|sed -nr ‘2s/.</em>t (.<em>) net.</em>/\1/gp’ 扩展的正则表达式取出IP，（）为分组，只有一个括号，所以后面写1<br>ifconfig ens33|sed -nr ‘2s/（.<em>t) (.</em>)( net.<em>)/\2/gp’ 扩展的正则表达式取出IP，（）为分组，有三个括号，所以后面写2留第二个<br>ifconfig | sed -nr “s/.inet (.</em>) netmask.<em>/\1/p” | head -n 1   取出7的IP<br>ifconfig | sed -nr “s/.inet (.</em>) netmask.*/\1/p” 取出7的三个网卡IP  </p>
</blockquote>
<h2 id="查询系统信息-重点"><a href="#查询系统信息-重点" class="headerlink" title="查询系统信息  ***重点"></a>查询系统信息  <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>***</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>重点</h2><p>..#RED is content color<br>..#依次显示出<br>..#系统版本<br>..#内核版本<br>..#CPU型号<br>..#内存大小<br>..#最大磁盘利用率<br>..#hostname<br>..#IP地址  </p>
<blockquote>
<p>RED=”\033[1;31m”<br>COLOREND=”\033[0m”<br>echo -e “OS version is $RED<code>cat /etc/centos-release</code>$COLOREND”<br>echo -e “kernel version $RED<code>uname -r</code>$COLOREND”<br>echo -e “The cpu type is $RED<code>lscpu |egrep -i &#39;model name&#39;|tr -s &#39; &#39;|cut -d: -f2</code>$COLOREND”<br>echo -e “The memory is $RED<code>free -h|egrep Mem|tr -s &#39; &#39; &#39;:&#39; |cut -d: -f2</code>$COLOREND”<br>echo -e “The max disk used is $RED<code>df |grep  /dev/sd|tr -s &quot; &quot; &quot;:&quot;|cut -d: -f5|sort -nr|head -1</code>$COLOREND”<br>echo -e “The hostname is $RED$(hostname)$COLOREND”<br>echo -e “The ipaddr is $RED<code>ifconfig|head -2|tail -1|tr -s &quot; &quot; &quot;:&quot;|cut -d: -f3</code>$COLOREND”<br>unset RED COLOREND  </p>
</blockquote>
<h1 id="Linux文本处理三剑客"><a href="#Linux文本处理三剑客" class="headerlink" title="Linux文本处理三剑客"></a>Linux文本处理三剑客</h1><p>grep：文本过滤(模式：pattern)工具<br>grep, egrep, fgrep（不支持正则表达式搜索）<br>sed：stream editor，文本编辑工具<br>awk：Linux上的实现gawk，文本报告生成器  </p>
<h2 id="grep-重点"><a href="#grep-重点" class="headerlink" title="grep*(重点)"></a>grep<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>(重点)</h2><p>grep: Global search REgularexpression and Print out the line<br>作用：文本搜索工具，根据用户指定的“模式”对目标文本逐行进行匹配检查；打印匹配到的行<br>模式：由正则表达式字符及文本字符所编写的过滤条件  </p>
<blockquote>
<p>grep [OPTIONS] PATTERN [FILE…]<br>grep root /etc/passwd<br>grep “$USER” /etc/passwd<br>grep ‘$USER’ /etc/passwd<br>grep <code>whoami</code> /etc/passwd<br>grep命令选项<br>–color=auto: 对匹配到的文本着色显示<br>-v: 显示不被pattern匹配到的行<br>-i: 忽略字符大小写<br>-n：显示匹配的行号<br>-c: 统计匹配的行数<br>-o: 仅显示匹配到的字符串<br>-q: 静默模式，不输出任何信息<br>-A #: after, 后#行<br>-B #: before, 前#行<br>-C #：context, 前后各#行<br>-e：实现多个选项间的逻辑or关系<br>grep –e ‘cat ’ -e ‘dog’ file<br>-w：匹配整个单词<br>-E：使用ERE<br>-F：相当于fgrep，不支持正则表达式<br>-ffile: 根据模式文件处理  </p>
</blockquote>
<h1 id="正则表达式-重点"><a href="#正则表达式-重点" class="headerlink" title="正则表达式*重点"></a>正则表达式<strong><strong><strong><strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong></strong></strong></strong>重点</h1><p>REGEXP：Regular Expressions，由一类特殊字符及文本字符所编写的模式，其中有些字符（元字符）不表示字符字面意义，而表示控制或通配的功能<br>程序支持：grep,sed,awk,vim, less,nginx,varnish等<br>分两类：<br>基本正则表达式：BRE<br>扩展正则表达式：ERE<br>grep -E, egrep<br>正则表达式引擎：<br>采用不同算法，检查处理正则表达式的软件模块<br>PCRE（Perl Compatible Regular Expressions）<br>元字符分类：字符匹配、匹配次数、位置锚定、分组<br>man 7 regex    </p>
<h3 id="基本正则表达式元字符"><a href="#基本正则表达式元字符" class="headerlink" title="基本正则表达式元字符"></a>基本正则表达式元字符</h3><p>字符匹配:<br>. 匹配任意单个字符<br>[] 匹配指定范围内的任意单个字符，示例：[wang] [0-9] [a-z] [a-zA-Z]<br>[^] 匹配指定范围外的任意单个字符<br>[:alnum:] 字母和数字<br>[:alpha:] 代表任何英文大小写字符，亦即A-Z, a-z<br>[:lower:] 小写字母[:upper:] 大写字母<br>[:blank:] 空白字符（空格和制表符）<br>[:space:]水平和垂直的空白字符（比[:blank:]包含的范围广）<br>[:cntrl:] 不可打印的控制字符（退格、删除、警铃…）<br>[:digit:] 十进制数字[:xdigit:]十六进制数字<br>[:graph:] 可打印的非空白字符<br>[:print:] 可打印字符<br>[:punct:] 标点符号  </p>
<h3 id="通配符是通配的文件名"><a href="#通配符是通配的文件名" class="headerlink" title="通配符是通配的文件名"></a>通配符是通配的文件名</h3><p>正则表达式是配的字符串，文件的内容<br>【wang】 匹配这四个字符其中的一个<br>grep “[123]” /etc/passwd查询passwd文件夹里包含123中一个数字的文件<br>grep -v “[123]” /etc/passwd查询passwd文件夹里不包含123中一个数字的文件<br>grep “[^123]” /etc/passwd查询passwd文件夹里除了123中一个数字的文件<br>匹配次数：用在要指定次数的字符后面，用于指定前面的字符要出现的次数<br>‘<em> 匹配前面的字符任意次，包括0次<br>贪婪模式：尽可能长的匹配<br>.</em>任意长度的任意字符<br>\?匹配其前面的字符0或1次<br>+匹配其前面的字符至少1次<br>{n}匹配前面的字符n次<br>{m,n}匹配前面的字符至少m次，至多n次<br>{,n}匹配前面的字符至多n次<br>{n,}匹配前面的字符至少n次   </p>
<h3 id="位置锚定：定位出现的位置"><a href="#位置锚定：定位出现的位置" class="headerlink" title="位置锚定：定位出现的位置"></a>位置锚定：定位出现的位置</h3><p>^ 行首锚定，用于模式的最左侧 grep “^bash” /etc/passwd<br>$ 行尾锚定，用于模式的最右侧 grep “bash$” /etc/passwd<br>^PATTERN$ 用于模式匹配整行<br>^$ 空行<br>^[[:space:]]<em>$ 空白行<br>\&lt; 或\b词首锚定，用于单词模式的左侧(单词不能包含数字、_、其他字母开头)<br>> 或\b词尾锚定，用于单词模式的右侧<br>\&lt;PATTERN>匹配整个单词<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></em>  </p>
<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><p>分组：() 将一个或多个字符捆绑在一起，当作一个整体处理，如：(root)+<br>分组括号中的模式匹配到的内容会被正则表达式引擎记录于内部的变量中，这些变量的命名方式为: \1, \2, \3, …<br>\1表示从左侧起第一个左括号以及与之匹配右括号之间的模式所匹配到的字符<br>示例：(string1+(string2)<em>)<br>\1 ：string1+(string2)</em><br>\2 ：string2<br>后向引用：引用前面的分组括号中的模式所匹配字符，而非模式本身<br>或者：|<br>示例：a|b: a或b C|cat: C或cat (C|c)at:Cat或cat<br>元字符  </p>
<blockquote>
<p>^ 行首<br><code>$</code>行尾<br>.任意单一字符<br>[][]内任意单一字符<br>[^]除[]内任意单一字符<br>*<em>前面字符重复不确定次数<br>++前面字符重复一次以上不确定次数<br>\?？前面字符重复0或1次<br>\转义符<br>.</em>任意长度字符<br>{n}前面字符重复n次<br>{n,}前面字符重复n次以上<br>{m,n}前面字符重复m次和n次之间<br>[:alnum:]字母和数字<br>[:alpha:]代表任何英文大小写字符，亦即A-Z, a-z<br>[:lower:]小写字母<br>[:upper:]大写字母<br>[:blank:]水平空白字符（空格和制表符）<br>[:space:]所有水平和垂直的空白字符（比[:blank:]包含的范围广）<br>[:cntrl:]不可打印的控制字符（退格、删除、警铃…）<br>[:digit:]十进制数字<br>[:graph:]可打印的非空白字符<br>[:print:]可打印字符<br>[:punct:]标点符号<br>[:xdigit:]十六进制数字    </p>
</blockquote>
<h2 id="egrep及扩展的正则表达式"><a href="#egrep及扩展的正则表达式" class="headerlink" title="egrep及扩展的正则表达式"></a>egrep及扩展的正则表达式</h2><p>egrep= grep -E<br>egrep[OPTIONS] PATTERN [FILE…]<br>扩展正则表达式的元字符：<br>字符匹配：<br>. 任意单个字符<br>[] 指定范围的字符<br>[^] 不在指定范围的字符<br>次数匹配：<br>*匹配前面字符任意次<br>?0或1次<br>+1次或多次<br>{m}匹配m次<br>{m,n}至少m，至多n次<br>位置锚定：<br>^行首<br>$行尾<br>\&lt;, \b语首<br>>, \b语尾<br>分组：()<br>后向引用：\1, \2, …<br>或者：<br>a|ba或b<br>C|catC或cat<br>(C|c)atCat或cat  </p>
<h1 id="vim简介-重点"><a href="#vim简介-重点" class="headerlink" title="vim简介*重点"></a>vim简介<strong><strong><strong><strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong></strong></strong></strong>重点</h1><p>见PDF6中第32，68，69页图片<br>vi: Visual Interface，文本编辑器<br>文本：ASCII, Unicode<br>文本编辑种类：<br>行编辑器: sed<br>全屏编辑器：nano, vi<br>vim-Vi Improved<br>其他编辑器：<br>gedit一个简单的图形编辑器<br>gvim一个Vim编辑器的图形版本  </p>
<h3 id="打开文件"><a href="#打开文件" class="headerlink" title="打开文件"></a>打开文件</h3><p>vim [OPTION]… FILE…<br>+#打开文件后，让光标处于第#行的行首，+默认行尾<br>+/PATTERN打开文件后，直接让光标处于第一个被PATTERN匹配到的行的行首<br>–b file 二进制方式打开文件<br>–d file1 file2… 比较多个文件<br>-m file 只读打开文件<br>ex file 或vim –e 直接进入ex模式<br>如果该文件存在，文件被打开并显示内容<br>如果该文件不存在，当编辑后第一次存盘时创建它<br>模式转换<br>命令模式–&gt; 插入模式<br>iinsert, 在光标所在处输入<br>I在当前光标所在行的行首输入<br>aappend, 在光标所在处后面输入<br>A在当前光标所在行的行尾输入<br>o在当前光标所在行的下方打开一个新行<br>O在当前光标所在行的上方打开一个新行  </p>
<hr>
<p>插入模式——–&gt; 命令模式<br>ESC<br>命令模式——–&gt; 扩展命令模式<br>:<br>扩展命令模式——–&gt; 命令模式<br>ESC,enter  </p>
<hr>
<p>扩展命令模式：<br>:q退出<br>:q!强制退出，丢弃做出的修改<br>:wq保存退出<br>:x保存退出<br>命令模式<br>ZZ保存退出<br>ZQ不保存退出<br>命令模式光标跳转<br>字符间跳转：<br>h: 左l: 右j: 下k: 上<br>.#COMMAND：跳转由#指定的个数的字符<strong><strong><strong><strong>**</strong></strong></strong></strong>  </p>
<h3 id="单词间跳转："><a href="#单词间跳转：" class="headerlink" title="单词间跳转："></a>单词间跳转：</h3><p>w：下一个单词的词首<br>e：当前或下一单词的词尾<br>b：当前或前一个单词的词首<br>。#COMMAND：由#指定一次跳转的单词数<br>当前页跳转：<br>H：页首M：页中间行L:页底<br>zt：将光标所在当前行移到屏幕顶端<br>zz：将光标所在当前行移到屏幕中间<br>zb：将光标所在当前行移到屏幕底端<br>行首行尾跳转：<br>^: 跳转至行首的第一个非空白字符<br>0: 跳转至行首<br><code>$</code>: 跳转至行尾<br>行间移动：<br>.#G、扩展命令模式下：# 跳转至由#指定行<br>G：最后一行<br>1G, gg: 第一行<br>句间移动：<br>)：下一句(：上一句<br>段落间移动：<br>}:下一段{：上一段<br>命令模式翻屏操作<br>Ctrl+f: 向文件尾部翻一屏<br>Ctrl+b: 向文件首部翻一屏<br>Ctrl+d: 向文件尾部翻半屏<br>Ctrl+u：向文件首部翻半屏  </p>
<h3 id="命令模式操作-重点"><a href="#命令模式操作-重点" class="headerlink" title="命令模式操作**重点"></a>命令模式操作<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>重点</h3><p>删除命令：<br>d: 删除命令，可结合光标跳转字符，实现范围删除<br>d<code>$</code>: 删除到行尾<br>d^:删除到非空行首<br>d0:删除到行首<br>dw:<br>de:<br>db:<br>.#COMMAND<br>dd: 删除光标所在的行<br>.#dd：多行删除<br>D：从当前光标位置一直删除到行尾，等同于d$<br>复制命令(y, yank)：<br>y: 复制，行为相似于d命令<br>y$<br>y0<br>y^<br>ye<br>yw<br>yb<br>.#COMMAND<br>yy：复制行<br>.#yy: 复制多行<br>Y: 复制整行  </p>
<h3 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h3><p>di” 光标在”“之间，则删除”“之间的内容<br>yi( 光标在()之间，则复制()之间的内容<br>vi[ 光标在[]之间，则选中[]之间的内容<br>dtx删除字符直到遇见光标之后的第一个x 字符<br>ytx复制字符直到遇见光标之后的第一个x 字符<br>扩展命令模式：地址定界<strong><strong><strong><strong><em>**</em></strong></strong></strong></strong>按ESC进入命令模式，再按：进入扩展命令模式  </p>
<h3 id="地址定界"><a href="#地址定界" class="headerlink" title="地址定界"></a>地址定界</h3><p>:start_pos,end_pos<br><code># 具体第#行，例如2表示第2行</code>#,# 从左侧#表示起始行，到右侧#表示结尾行<br><code>#,+# 从左侧#表示的起始行，加上右侧#表示的行数  
：2,+3 表示2到5行  
. 当前行</code>$<code>最后一行  
.,</code>$`-1 当前行到倒数第二行<br>% 全文, 相当于1,$<br>/pat1/,/pat2/<br>从第一次被pat1模式匹配到的行开始，一直到第一次被pat2匹配到的行结束  </p>
<p>#,/pat/<br>/pat/,$<br>使用方式：后跟一个编辑命令<br>d<br>y<br>w file: 将范围内的行另存至指定文件中<br>r file：在指定位置插入指定文件中的所有内容<br>/PATTERN：从当前光标所在处向文件尾部查找<br>?PATTERN：从当前光标所在处向文件首部查找<br>n：与命令同方向<br>N：与命令反方向  </p>
<hr>
<h2 id="s-在扩展模式下完成查找替换操作-重点"><a href="#s-在扩展模式下完成查找替换操作-重点" class="headerlink" title="s: 在扩展模式下完成查找替换操作**重点"></a>s: 在扩展模式下完成查找替换操作<strong><strong><strong><strong><strong><strong><strong><strong><em>**</em></strong></strong></strong></strong></strong></strong></strong></strong>重点</h2><p>格式：s/要查找的内容/替换为的内容/修饰符<br>要查找的内容：可使用模式<br>替换为的内容：不能使用模式，但可以使用\1, \2, …等后向引用符号；还可以使用“&amp;”引用前面查找时查找到的整个内容<br>修饰符：<br>i: 忽略大小写<br>g: 全局替换；默认情况下，每一行只替换第一次出现<br>gc:全局替换，每次替换前询问<br>查找替换中的分隔符/可替换为其它字符，例如<br>s@/etc@/var@g<br>s#/boot#/#i  </p>
<hr>
<p>命令模式：撤消更改<br>u撤销最近的更改  </p>
<p>#u撤销之前多次更改<br>U撤消光标落在这行后所有此行的更改<br>按Ctrl-r重做最后的“撤消”更改<br>. 重复前一个操作<br>n.重复前一个操作n次<br>多文件模式<br>vim FILE1 FILE2 FILE3 …<br>:next 下一个<br>:prev前一个<br>:first 第一个<br>:last 最后一个<br>:wall 保存所有<br>:qall退出所有<br>:wqall  </p>
<hr>
<h3 id="定制vim的工作特性"><a href="#定制vim的工作特性" class="headerlink" title="定制vim的工作特性"></a>定制vim的工作特性</h3><p>配置文件：永久有效<br>全局：/etc/vimrc<strong><strong><strong><strong><strong>***</strong></strong></strong></strong></strong><br>个人：~/.vimrc<br>扩展模式：当前vim进程有效<br>(1) 行号<br>显示：set number, 简写为set nu<br>取消显示：set nonumber, 简写为set nonu<br>(2) 忽略字符的大小写<br>启用：set ic<br>不忽略：set noic<br>(3) 自动缩进<br>启用：set ai<br>禁用：set noai<br>(4) 智能缩进<br>启用：smartindent简写set si<br>禁用：set nosi<br>(5) 高亮搜索<br>启用：set hlsearch<br>禁用：set nohlsearch<br>(6) 语法高亮<br>启用：syntax on<br>禁用：syntax off<br>(7) 显示Tab和换行符^I 和$显示<br>启用：set list<br>禁用：set nolist<br>(8) 文件格式<br>启用windows格式：set fileformat=dos<br>启用unix格式：set fileformat=unix<br>简写：set ff=dos|unix<br>(9) 设置文本宽度<br>set textwidth=65 (vimonly)<br>set wrapmargin=15<br>(10) 设置光标所在行的标识线<br>启用：set cursorline，简写cul<br>禁用：set no cursorline<br>(11) 复制保留格式<br>启用：set paste<br>禁用：set nopaste  </p>
<hr>
<h2 id="SHELL脚本-重点"><a href="#SHELL脚本-重点" class="headerlink" title="SHELL脚本*重点"></a>SHELL脚本<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>重点</h2><p>创建shell脚本<br>第一步：使用文本编辑器来创建文本文件<br>第一行必须包括shell声明序列：#!<br>.#!/bin/bash<br>添加注释<br>注释以#开头<br>第二步：运行脚本<br>给予执行权限，在命令行上指定脚本的绝对或相对路径<br>直接运行解释器，将脚本作为解释器程序的参数运行<br>脚本规范<br>脚本代码开头约定<br>1、第一行一般为调用使用的语言<br>2、程序名，避免更改文件名为无法找到正确的文件<br>3、版本号<br>4、更改后的时间<br>5、作者相关信息<br>6、该程序的作用，及注意事项<br>7、最后是各版本的更新简要说明<br>shell脚本示例  </p>
<p>#!/bin/bash  </p>
<p>#——————————————    </p>
<p>#Filename: hello.sh   </p>
<p>#Revision: 1.1    </p>
<p>#Date: 2017/06/01  </p>
<p>#Author: wang  </p>
<p>#Email: <a href="mailto:wang@gmail.com" target="_blank" rel="noopener">wang@gmail.com</a>  </p>
<p>#Website: <a href="http://www.magedu.com" target="_blank" rel="noopener">www.magedu.com</a>  </p>
<p>#Description: This is the first script  </p>
<p>#——————————————  </p>
<p>#Copyright: 2017 wang  </p>
<p>#License: GPL<br>echo “hello world”  </p>
<hr>
<p>.vimrc文件在根目录下，修改：vim  .vimrc 文件<br>可以修改vim的脚本注释作者等信息<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>***</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p>
<hr>
<h3 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h3><p>变量赋值：name=‘value’<br>可以使用引用value:<br>(1) 可以是直接字串; name=”root”<br>(2) 变量引用：name=”$USER”  </p>
<p>(3) 命令引用：name=<code>COMMAND</code> name=$(COMMAND)<br>变量引用：${name} $name<br>“”：弱引用，其中的变量引用会被替换为变量值</p>
<p>‘’：强引用，其中的变量引用不会被替换为变量值，而保持原字符串<br>显示已定义的所有变量：set<br>删除变量：unset name<br>环境变量<br>变量声明、赋值：<br>export name=VALUE<br>declare -x name=VALUE<br>变量引用：$name, ${name}<br>显示所有环境变量：<br>env</p>
<p>printenv<br>export<br>declare -x<br>删除变量：<br>unset name<br>退出状态<br>进程使用退出状态来报告成功或失败<br>0 代表成功，1－255代表失败<br><code>$</code>? 变量保存最近的命令退出状态<br>例如：<br>ping-c1-W1hostdown&amp;&gt;/dev/null<br>echo$?  </p>
<hr>
<h3 id="退出状态码-8"><a href="#退出状态码-8" class="headerlink" title="退出状态码***8"></a>退出状态码<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>***</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>8</h3><p>bash自定义退出状态码<br>exit [n]：自定义退出状态码<br>注意：脚本中一旦遇到exit命令，脚本会立即终止；终止退出状态取决于exit命令后面的数字<br>注意：如果未给脚本指定退出状态码，整个脚本的退出状态码取决于脚本中执行的最后一条命令的状态码  </p>
<h3 id="算术运算"><a href="#算术运算" class="headerlink" title="算术运算"></a>算术运算</h3><p>bash中的算术运算:help let<br>+, -, <em>, /, %取模（取余）, **（乘方）<br>实现算术运算：<br>(1) let var=算术表达式<br>(2) var=$[算术表达式]<br>(3) var=$((算术表达式))<br>(4) var=$(expr arg1 arg2 arg3 …)<br>(5) declare –ivar= 数值<br>(6) echo ‘算术表达式’ | bc<br>乘法符号有些场景中需要转义，如</em><br>bash有内建的随机数生成器：$RANDOM（0-32767）<br>echo $[$RANDOM%50] ：0-49之间随机数<br>增强型赋值：<br>+=, -=, <em>=, /=, %=<br>let varOPERvalue<br>例如:let count+=3<br>自加3后自赋值<br>自增，自减：<br>例子：<br>let var+=1<br>let var++<br>let var-=1<br>let var–<br>let n=1+2<br>echo $n<br>3<br>n=$（2+3）<br>2<br>expr 3+4  错误<br>expr 3 + 4<br>7<br>expr为命令  3+4为参数之间要有空格<strong><strong><strong><strong><strong><strong><strong><strong><em>**</em></strong></strong></strong></strong></strong></strong></strong></strong><br>echo $[RANDOM%100+1] 取1-100之间的随机数 <strong><br>RANDOM为随机数，除以100得到的余数为0-99，+1后为1-100 **</strong></em><br>echo $? 查询命令执行结果  </p>
<hr>
<p>&amp; 与  交集<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><em>**</em></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><br>| 或  并集<br>! 非<br>^ 异或 相同为0 不同为1<br>&amp;&amp; 短路与 两条命令，第一条为真，则执行第二天2条看真假，第一条为假的情况下直接不执行命令<br>|| 短路或 两条命令，第一条为假，则执行第二天2条看真假，第一条为真的情况下直接不执行命令<br>同或 相同为1  不同为0<br>[ “$str1” !=”$str2” ] 判断两个字符串是否相同<br>bash +x 加sh脚本可以看到脚本运行的过程，可以检查哪里出错<br>export +定义的变量可使该变量在子进程中也生效<br>find -name +文件名 查找文件或者安装包  </p>
<hr>
<h3 id="bash的数值测试"><a href="#bash的数值测试" class="headerlink" title="bash的数值测试"></a>bash的数值测试</h3><p>-v VAR<br>变量VAR是否设置<br>数值测试：<br>-gt是否大于<br>-ge是否大于等于<br>-eq是否等于<br>-ne是否不等于<br>-lt是否小于<br>-le是否小于等于<br>Bash的文件属性测试  </p>
<h3 id="文件大小测试："><a href="#文件大小测试：" class="headerlink" title="文件大小测试："></a>文件大小测试：</h3><p>-s FILE: 是否存在且非空<br>文件是否打开：<br>-t fd: fd文件描述符是否在某终端已经打开<br>-N FILE：文件自从上一次被读取之后是否被修改过<br>-O FILE：当前有效用户是否为文件属主<br>-G FILE：当前有效用户是否为文件属组<br>Bash的文件测试  </p>
<h3 id="存在性测试"><a href="#存在性测试" class="headerlink" title="存在性测试"></a>存在性测试</h3><p>-a FILE：同-e<br>-e FILE: 文件存在性测试，存在为真，否则为假<br>存在性及类别测试<br>-b FILE：是否存在且为块设备文件<br>-c FILE：是否存在且为字符设备文件<br>-d FILE：是否存在且为目录文件<br>-f FILE：是否存在且为普通文件<br>-h FILE 或-L FILE：存在且为符号链接文件<br>-p FILE：是否存在且为命名管道文件<br>-S FILE：是否存在且为套接字文件  </p>
<hr>
<p>使用read命令来接受输入<br>使用read来把输入值分配给一个或多个shell变量<br>-p指定要显示的提示<br>-s 静默输入，一般用于密码<br>-n N指定输入的字符长度N<br>-d‘字符’ 输入结束符<br>-t N TIMEOUT为N秒<br>read从标准输入中读取值，给每个单词分配一个变量<br>所有剩余单词都被分配给最后一个变量<br>read -p “Enter a filename:“ FILE  </p>
<hr>
<h2 id="bash如何展开命令行-重点"><a href="#bash如何展开命令行-重点" class="headerlink" title="bash如何展开命令行*重点"></a>bash如何展开命令行<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>重点</h2><p>把命令行分成单个命令词<br>展开别名<br>展开大括号的声明（{}）<br>展开波浪符声明（~）<br>命令替换$()和<code></code>）<br>再次把命令行分成命令词<br>展开文件通配（*、?、[abc]等等）<br>准备I/0重导向（&lt;、&gt;）<br>运行命令<br>防止扩展<br>反斜线（\）会使随后的字符按原意解释 </p>
<p>$echoYourcost:\$5.00</p>
<p>Yourcost:<code>$</code>5.00<br>加引号来防止扩展<br>单引号（’）防止所有扩展<br><code>$</code>（美元符号）－变量扩展<br>`（反引号）－命令替换<br>\（反斜线）－禁止单个字符扩展<br>!（叹号）－历史命令替换  </p>
<hr>
<h1 id="Profile类"><a href="#Profile类" class="headerlink" title="Profile类"></a>Profile类</h1><p>按功能划分，存在两类：<br>profile类和bashrc类<br>profile类：为交互式登录的shell提供配置<br>全局：/etc/profile, /etc/profile.d/*.sh<br>个人：~/.bash_profile<br>功用：<br>(1) 用于定义环境变量<br>(2) 运行命令或脚本<br>Bashrc类<br>bashrc类：为非交互式和交互式登录的shell提供配置<br>全局：/etc/bashrc<br>个人：~/.bashrc<br>功用：<br>(1) 定义命令别名和函数<br>(2) 定义本地变量  </p>
<hr>
<h3 id="locate命令"><a href="#locate命令" class="headerlink" title="locate命令"></a>locate命令</h3><p>locate KEYWORD<br>有用的选项  </p>
<blockquote>
<p>-i不区分大小写的搜索<br>-n N只列举前N个匹配项目<br>-r 使用正则表达式<br>示例<br>搜索名称或路径中带有“conf”的文件<br>locate conf<br>使用Regex来搜索以“.conf”结尾的文件<br>locate -r ‘.conf$’  </p>
</blockquote>
<h1 id="find-重点"><a href="#find-重点" class="headerlink" title="find***重点"></a>find<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>***</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>重点</h1><p>查找条件<br>指搜索层级<br>-maxdepthlevel 最大搜索目录深度,指定目录为第1级<br>-mindepthlevel 最小搜索目录深度<br>先处理目录内的文件，再处理目录<br>-depth  </p>
<hr>
<p>根据文件名和inode查找：<br>-name “文件名称”：支持使用glob<br>*, ?, [], [^]<br>-iname”文件名称”：不区分字母大小写<br>-inumn 按inode号查找<br>-samefilename 相同inode号的文件<br>-links n 链接数为n的文件<br>-regex“PATTERN”：以PATTERN匹配整个文件路径，而非文件名称  </p>
<hr>
<p>根据属主、属组查找：<br>-user USERNAME：查找属主为指定用户(UID)的文件<br>-group GRPNAME: 查找属组为指定组(GID)的文件<br>-uidUserID：查找属主为指定的UID号的文件<br>-gidGroupID：查找属组为指定的GID号的文件<br>-nouser：查找没有属主的文件<br>-nogroup：查找没有属组的文件  </p>
<hr>
<p>根据文件类型查找：  </p>
<blockquote>
<p>-type TYPE:<br>•f: 普通文件<br>•d: 目录文件<br>•l: 符号链接文件<br>•s：套接字文件<br>•b: 块设备文件<br>•c: 字符设备文件<br>•p: 管道文件<br>空文件或目录<br>-empty<br>find /app -type d -empty</p>
</blockquote>
<hr>
<h3 id="find示例"><a href="#find示例" class="headerlink" title="find示例"></a>find示例</h3><p>备份配置文件，添加.orig这个扩展名<br>find -name “*.conf” -exec cp {} {}.orig\;<br>提示删除存在时间超过３天以上的joe的临时文件<br>find/tmp-ctime+3-userjoe-okrm{}\;<br>在主目录中寻找可被其它用户写入的文件<br>find~-perm-002 -execchmodo-w{}\;<br>find /home –type d -ls  </p>
<hr>
<h1 id="10-14笔记"><a href="#10-14笔记" class="headerlink" title="10.14笔记**"></a>10.14笔记<strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></h1><p>locate text.sh搜索文件<br>因为是从locate的数据库搜索文件的，速度快不影响服务器性能，适合搜索本来就在内存中的文件，而新建的文件不会马上搜索到，可以输入updatedb更新locate数据库<br>locata +”<em>通配符”搜索文件<br>locata -r “.sh$”搜索以.sh结尾的文件(支持正则表达式)<br>find搜索是实时搜索，在硬盘上搜索，速度慢且影响服务器性能，而且没有权限的文件夹搜索不进去 <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>（面试常有）<br>find （路径）   -name（iname） “</em>text<em>“搜索包含text的文件+i后忽略大小写<br>find -name “</em>.txt”  查找以txt结尾的文件<br>find -empty 搜索空文件或者空目录<br>find / -size 10k 搜索9-10k的文件<br>find / -size -10k  搜索0-10k的文件<br>find / -size +10k  搜索大于10k的文件<br>find / -size +5k -size 10k 搜索5-10K的文件<br>find -name “*.txt” -exec（批量） rm {} \; 查找后缀名为txt的文件并 批量 删除  </p>
<p>chmod a+x 文件   给所有人加上此文件的执行权限<br>ll -d 查询当前目录下的权限  <strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong>  </p>
<h3 id="compress"><a href="#compress" class="headerlink" title="compress"></a>compress</h3><p>compress +文件【多个文件时压缩每个文件为单独的压缩文件】  压缩该文件，压缩后该文件消失，生成一个.z的压缩文件<br>compress -c +文件 &gt; 文件.gz压缩文件并显示过程 不会丢失源文件，利用重定向保留原文件<br>uncompress +文件【同解压】 等于 compress -d+文件  解压该文件，解压后该文件消失，生成不带.z的原文件 <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p>
<h3 id="gzip"><a href="#gzip" class="headerlink" title="gzip"></a>gzip</h3><p>gzip +文件【多个文件时压缩每个文件为单独的压缩文件】  压缩该文件，压缩后该文件消失，生成一个.gz的压缩文件<br>zcat -c +文件 &gt; 文件.gz压缩文件并显示过程 不会丢失源文件，利用重定向保留原文件<br>gunzip +文件【同解压】 等于 gzip -d+文件  解压该文件，解压后该文件消失，生成不带.gz的原文件  <strong><strong><strong><strong><strong><strong><strong><strong><strong><em>**</em></strong></strong></strong></strong></strong></strong></strong></strong></strong>  </p>
<h3 id="bzip2"><a href="#bzip2" class="headerlink" title="bzip2"></a>bzip2</h3><p>bzip2 +文件【多个文件时压缩每个文件为单独的压缩文件】  压缩该文件，压缩后该文件消失，生成一个.bz2的压缩文件<br>bzip2 -k 压缩文件并保留原文件<br>不会丢失源文件，利用重定向保留原文件<br>bzip2 -d+文件 等于bunzip2  解压该文件，解压后该文件消失，生成不带.bz2的原文件<br>bzcat +文件  查看压缩文件而不执行解压   <strong><strong><strong><strong><strong><strong>***</strong></strong></strong></strong></strong></strong>  </p>
<h3 id="xz"><a href="#xz" class="headerlink" title="xz"></a>xz</h3><p>xz +文件【多个文件时压缩每个文件为单独的压缩文件】  压缩该文件，压缩后该文件消失，生成一个.xz的压缩文件<br>zx -k 压缩文件并保留原文件<br>不会丢失源文件，利用重定向保留原文件<br>zx -d+文件 等于unzx  解压该文件，解压后该文件消失，生成不带.zx的原文件<br>xzcat +文件 查看压缩文件而不执行解压<br>处理-开头的文件时前面加–<br>以上压缩只能压缩单个文件，而不能压缩文件夹<br>压缩比 xz &gt; bzip2 &gt; gzip &gt; compress  </p>
<h3 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h3><p>zip +生成文件名 +要压缩的文件名 压缩文件<br>zip -r /backup/sysconfig /etc/sysconfig  加-r是压缩文件夹，将etc下的文件夹    sysconfig打包压缩生成sysconfig.zip文件放到backup文件夹<br>unzip sysconfig.zip 解压文件 +p可以保留权限  </p>
<h3 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h3><p>tar -cvf etc.tar etc  将整个etc文件夹打包保存为etc.tar ，其中后缀名tar要手动添加，只有打包而没有压缩文件<br>tar -rf etc.tar text 追加text文件到tar.<br>tar xvf etc.tar -C /data  解压文件到data文件夹  </p>
<hr>
<p>例子<br>将data下的文件夹etc先打包再压缩的三种方法，压缩比 xz &gt;bz2 &gt;gz<br>tar zcvf etc.tar.gz  /data/etc<br>tar jcvf etc.tar.bz2  /data/etc<br>tar Jcvf etc.tar.xz  /data/etc<br>tar cvf etc.tar.xz  解压到当前目录<br>tar xf etc.tar.bz2   解压到当前目录<br>split -b 2M -d /data/bigfile.tar.xz  bigfile 把大文件bigfile.tar.xz切割为每2M一个的小文件，并以bigfile开头后面加数字，如bigfile1,bigfile2,bigfile3<br>cat bigfile* &gt; bigfile.tar.xz 合并切割的这些文件  </p>
<h1 id="处理文本的工具sed-重点"><a href="#处理文本的工具sed-重点" class="headerlink" title="处理文本的工具sed  *重点"></a>处理文本的工具sed  <strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong>重点</h1><p>sed工具<br>用法：<br>sed[option]… ‘script’ inputfile…<br>常用选项：<br>-n不输出模式空间内容到屏幕，即不自动打印<br>-e多点编辑<br>-f /PATH/SCRIPT_FILE从指定文件中读取编辑脚本<br>-r支持使用扩展正则表达式<br>-i.bak备份文件并原处编辑<br>script:<br>‘地址命令’<br>地址定界：<br>(1) 不给地址：对全文进行处理<br>(2) 单地址：<br>.#: 指定的行，$：最后一行<br>/pattern/：被此处模式所能够匹配到的每一行<br>(3) 地址范围：<br>.#,#<br>.#,+#<br>/pat1/,/pat2/<br>.#,/pat1/<br>(4) ~：步进  </p>
<h3 id="编辑命令："><a href="#编辑命令：" class="headerlink" title="编辑命令："></a>编辑命令：</h3><p>d删除模式空间匹配的行，并立即启用下一轮循环<br>p打印当前模式空间内容，追加到默认输出之后<br>a<code>[\]</code>text在指定行后面追加文本，支持使用\n实现多行追加<br>i<code>[\]</code>text在行前面插入文本<br>c<code>[\]</code>text替换行为单行或多行文本<br>w /path/file保存模式匹配的行至指定文件<br>r /path/file读取指定文件的文本至模式空间中匹配到的行后<br>=为模式空间中的行打印行号<br>!模式空间中匹配行取反处理  </p>
<h2 id="SED笔记-重点重点重点"><a href="#SED笔记-重点重点重点" class="headerlink" title="SED笔记**重点重点重点"></a>SED笔记<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>重点重点重点</h2><p>SED</p>
<p>用法：  不加-i时仅仅是打印到屏幕显示，加-i可以修改文件，一般加-i.bak备份一个.bak文件<br>sed[option]… ‘script’ inputfile…<br>常用选项：<br>-n不输出模式空间内容到屏幕，即不自动打印<br>-e多点编辑<br>-f /PATH/SCRIPT_FILE从指定文件中读取编辑脚本<br>-r支持使用扩展正则表达式<br>-i.bak备份文件并原处编辑<br>编辑命令：<br>d删除模式空间匹配的行，并立即启用下一轮循环<br>p打印当前模式空间内容，追加到默认输出之后<br>a<code>[\]</code>text在指定行后面追加文本，支持使用\n实现多行追加<br><code>i[\]</code>text在行前面插入文本<br><code>c [\]</code>text替换行为单行或多行文本<br>w /path/file保存模式匹配的行至指定文件<br>r /path/file读取指定文件的文本至模式空间中匹配到的行后<br>=为模式空间中的行打印行号<br>!模式空间中匹配行取反处理  </p>
<hr>
<p>例子<br>sed‘2p’ /etc/passwd<br>sed–n ‘2p’ /etc/passwd  显示第2行<br>sed–n ‘1,4p’ /etc/passwd  显示1-4行<br>sed–n ‘/root/p’ /etc/passwd  显示带有root的行<br>sed–n ‘2,/root/p’ /etc/passwd  从2行开始<br>sed-n ‘/^<code>$</code>/=’ file 显示空行行号  =代表行号<br>sed–n –e ‘/^$/p’ –e ‘/^$/=’ file<br>sed–n –r ‘/^#|^$/d’ + file 删除该文件中带#注释和空白的行<br>sed‘/root/a\superman’ /etc/passwd行后<br>sed‘/root/i\superman’ /etc/passwd行前<br>sed‘/root/c\superman’ /etc/passwd代替行<br>s///查找替换,支持使用其它分隔符，s@@@，s###<br>替换标记：<br>g行内全局替换<br>p显示替换成功的行<br>w /PATH/FILE将替换成功的行保存至文件中<br>nl 可以显示行号  </p>
<hr>
<p>sed -n ‘/^u/p’  /data/f1  打印出data下的f1文件中以u开头的行<br>sed -n ‘3,9’只显示3-9行<br>sed -n ‘/^ftp/,/^lib/‘ passwd 显示passwd文件中以ftp开头和以lib开头之间的行<br>sed -n ‘1~2p’ 打印奇数行<br>sed -n ‘2~2p’ 打印偶数行<br>sed -i ‘/^SELINUX=/cSELINUX=disabled’ /etc/selinux/config  把config文件中的SELINUX=enforcing改为SELINUX=disabled  禁用selinux<br>sed -n ‘s/tmpfs/tempfilesystem/g’ /etc/fstab 将文件fstab中的tmpfs替换为  tempfilesystem，并且只显示替换结果，s为查找替换，p为只显示替换的那一行<br>sed -r ‘s/[[:alpha:]]/\u&amp;/g’ +文件 [[:alpha:]]意思为字母，u为大写，&amp;表示搜索到的内容，用u&amp;替换原内容，把所有的字母替换为大写<br>sed -r ‘s/[[:alpha:]]/\l&amp;/g’ +文件 [[:alpha:]]意思为字母，l为小写，&amp;表示搜索到的内容，用u&amp;替换原内容，把所有的字母替换为小写<br>sed -r ‘s/^[^#]/#&amp;’ +文件 将文件中不是#开头的行加上#并显示，其中&amp;代表被搜索出来的内容，等于用#&amp;替换了原来的内容，加-i可以直接修改 ………………………..（重点）<br>sed -nr ‘/.<em>CMDLINE_LINUX.</em>/s#(.*)”#\1 net.ifnames=0”#p’ /etc/default/grub   在带有CMDLINE_LINUX的一行后加上net.ifnames=0  仅在7系统需要修改    ………………….修改<br>s///查找替换,支持使用其它分隔符，s@@@，s###<br>替换标记：<br>g行内全局替换<br>p显示替换成功的行<br>w /PATH/FILE将替换成功的行保存至文件中  </p>
<hr>
<p>第三次博客：<br>TXT:10-08–10-14<br>PDF 6开始-PDF9  </p>
<hr>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="true">
                <source type="audio/mpeg" src="http://www.ytmp3.cn/down/35843.mp3">
            </audio>
            
        </div>
        
    <div id='gitalk-container' class="comment link"
        data-ae='false'
        data-ci=''
        data-cs=''
        data-r=''
        data-o=''
        data-a=''
        data-d='false'
    >查看评论</div>


    </div>
    
</div>


    </div>
</div>
</body>
<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>




</html>