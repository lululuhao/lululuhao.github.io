<!DOCTYPE html>













<html class="theme-next pisces" lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<script>
    (function(){
        if(''){
            if (prompt('请输入文章密码') !== ''){
                alert('密码错误！');
                history.back();
            }
        }
    })();
</script>
<style>
    .pace .pace-progress {
        background: #1E92FB; /*进度条颜色*/
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*阴影颜色*/
    }
    .pace .pace-activity {
        border-top-color: #1E92FB;    /*上边框颜色*/
        border-left-color: #1E92FB;    /*左边框颜色*/
    }
</style>
<meta name="theme-color" content="#222">






  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.6.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.6.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.6.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.6.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.6.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.6.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  





  <meta property="og:type" content="website">
<meta property="og:title" content="Apologize&#39;s blogs">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Apologize&#39;s blogs">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Apologize&#39;s blogs">



  <link rel="alternate" href="https://www.lh1.ink/whoami/" title="Apologize's blogs" type="application/atom+xml" />




  <link rel="canonical" href="http://yoursite.com/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Apologize's blogs</title>
  











  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
    <a href="https://github.com/liukkui"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png" alt="Fork me on GitHub"></a>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Apologize's blogs</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签<span class="badge">8</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类<span class="badge">1</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档<span class="badge">36</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-相册">

    
    
    
      
    

    
      
    

    <a href="/photos/" rel="section"><i class="menu-item-icon fa fa-fw fa-image"></i> <br />相册</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-schedule">

    
    
    
      
    

    
      
    

    <a href="/schedule/" rel="section"><i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />日程表</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    <a href="https://github.com/liukkui" class="github-corner" target="_blank" title="Follow me on GitHub" aria-label="Follow me on GitHub">
      <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#222; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
    <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
      </svg>
      </a>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/18/文本三剑客之awk/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="摩托猿">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/haha.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Apologize's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/10/18/文本三剑客之awk/" class="post-title-link" itemprop="http://yoursite.com/index.html">文本三剑客之awk</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-10-18 00:00:00" itemprop="dateCreated datePublished" datetime="2017-10-18T00:00:00+08:00">2017-10-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-12-09 21:34:35" itemprop="dateModified" datetime="2018-12-09T21:34:35+08:00">2018-12-09</time>
              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/10/18/文本三剑客之awk/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2017/10/18/文本三剑客之awk/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="文本处理三剑客之Awk"><a href="#文本处理三剑客之Awk" class="headerlink" title="文本处理三剑客之Awk"></a>文本处理三剑客之Awk</h1><p><img src="/2017/10/18/文本三剑客之awk/awk.png" alt=""></p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2017/10/18/文本三剑客之awk/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
         
          <!--/noindex-->
        
      
    </div>

    

    
    
    

<div>
  
</div>

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/18/ansible/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="摩托猿">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/haha.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Apologize's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/18/ansible/" class="post-title-link" itemprop="http://yoursite.com/index.html">ansible</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-09-18 00:00:00" itemprop="dateCreated datePublished" datetime="2018-09-18T00:00:00+08:00">2018-09-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-12-10 13:52:03" itemprop="dateModified" datetime="2018-12-10T13:52:03+08:00">2018-12-10</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/自动化运维/" itemprop="url" rel="index"><span itemprop="name">自动化运维</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/09/18/ansible/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/09/18/ansible/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="运维自动化管理工具之Ansible"><a href="#运维自动化管理工具之Ansible" class="headerlink" title="运维自动化管理工具之Ansible"></a>运维自动化管理工具之Ansible</h1><p><img src="/2018/09/18/ansible/ansible.png" alt=""><br></p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2018/09/18/ansible/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
         
          <!--/noindex-->
        
      
    </div>

    

    
    
    

<div>
  
</div>

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/24/L·H/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="摩托猿">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/haha.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Apologize's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/09/24/L·H/" class="post-title-link" itemprop="http://yoursite.com/index.html">L·H</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-09-24 18:18:18" itemprop="dateCreated datePublished" datetime="2019-09-24T18:18:18+08:00">2019-09-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-11-08 20:46:59" itemprop="dateModified" datetime="2018-11-08T20:46:59+08:00">2018-11-08</time>
              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/09/24/L·H/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2019/09/24/L·H/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>如果痴痴的等某日，终可等到一生中最爱。</strong></p>

          
        
      
    </div>

    

    
    
    

<div>
  
</div>

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="摩托猿">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/haha.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Apologize's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/" class="post-title-link" itemprop="http://yoursite.com/index.html">未命名</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-15 21:56:09" itemprop="dateCreated datePublished" datetime="2019-03-15T21:56:09+08:00">2019-03-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-16 21:23:48" itemprop="dateModified" datetime="2019-03-16T21:23:48+08:00">2019-03-16</time>
              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="DevOps-之基于Jenkins实现的CI与CD"><a href="#DevOps-之基于Jenkins实现的CI与CD" class="headerlink" title="DevOps 之基于Jenkins实现的CI与CD"></a>DevOps 之基于Jenkins实现的CI与CD</h1><p>DevOps简介：</p>
<p>DevOps 是Development和Operations的组合，也就是开发和运维的简写。</p>
<p>DevOps 是针对企业中的研发人员、运维人员和测试人员的工作理念，是他们在应用开发、代码部署和质量测试等整条生命周期中协作和沟通的最佳实践，DevOps 强调整个组织的合作以及交付和基础设施变更的自动化、从而实现持续集成、持续部署和持续交付。</p>
<p>DevOps 四大平台：代码托管(gitlab/svn)、项目管理(jira)、运维平台(腾讯蓝鲸/开源平台)、持续交付(Jenkins/gitlab)</p>
<h2 id="1-1：什么是DevOps："><a href="#1-1：什么是DevOps：" class="headerlink" title="1.1：什么是DevOps："></a>1.1：什么是DevOps：</h2><p>​                                                  <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/001.png" alt="1552469963552"></p>
<h2 id="1-2：为什么要推广DevOps？"><a href="#1-2：为什么要推广DevOps？" class="headerlink" title="1.2：为什么要推广DevOps？"></a>1.2：为什么要推广DevOps？</h2><p>DevOps 强调团队协作、相互协助、持续发展，然而传统的模式是开发人员只顾开发程序，运维只负责基础环境管理和代码部署及监控等，其并不是为了一个共同的目标而共同实现最终的目的，而DevOps 则实现团队作战，即无论是开发、运维还是测试，都为了最终的代码发布、持续部署和业务稳定而付出各自的努力，从而实现产品设计、开发、测试和部署的良性循环，实现产品的最终持续交付。</p>
<p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/002.png" alt="1552470014252"></p>
<h2 id="1-3：传统技术团队："><a href="#1-3：传统技术团队：" class="headerlink" title="1.3：传统技术团队："></a>1.3：传统技术团队：</h2><p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/003.png" alt="1552470031419"></p>
<h2 id="1-4：DevOps技术团队："><a href="#1-4：DevOps技术团队：" class="headerlink" title="1.4：DevOps技术团队："></a>1.4：DevOps技术团队：</h2><p>​        </p>
<p>​          戴明环          </p>
<p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/004.png" alt="1552470031419"></p>
<h2 id="1-5：什么是持续集成-CI-Continuous-integration-："><a href="#1-5：什么是持续集成-CI-Continuous-integration-：" class="headerlink" title="1.5：什么是持续集成(CI-Continuous integration)："></a>1.5：什么是持续集成(CI-Continuous integration)：</h2><p>持续集成是指多名开发者在开发不同功能代码的过程当中，可以频繁的将代码行合并到一起并切相互不影响工作。</p>
<h2 id="1-6：什么是持续部署-CD-continuous-deployment-："><a href="#1-6：什么是持续部署-CD-continuous-deployment-：" class="headerlink" title="1.6：什么是持续部署(CD-continuous deployment)："></a>1.6：什么是持续部署(CD-continuous deployment)：</h2><p>是基于某种工具或平台实现代码自动化的构建、测试和部署到线上环境以实现交付高质量的产品,持续部署在某种程度上代表了一个开发团队的更新迭代速率。</p>
<h2 id="1-7：什么是持续交付-Continuous-Delivery-："><a href="#1-7：什么是持续交付-Continuous-Delivery-：" class="headerlink" title="1.7：什么是持续交付(Continuous Delivery)："></a>1.7：什么是持续交付(Continuous Delivery)：</h2><p>持续交付是在持续部署的基础之上，将产品交付到线上环境，因此持续交付是产品价值的一种交付，是产品价值的一种盈利的实现。</p>
<p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/005.png" alt="1552738200584"></p>
<h2 id="1-8：常见的部署方式："><a href="#1-8：常见的部署方式：" class="headerlink" title="1.8：常见的部署方式："></a>1.8：常见的部署方式：</h2><p>开发自己上传–最原始的方案</p>
<p>开发给运维手动上传–运维自己手动部署</p>
<p>运维使用脚本复制–半自动化</p>
<p>结合web界面一键部署–自动化</p>
<h2 id="1-9：常见的持续集成开源工具："><a href="#1-9：常见的持续集成开源工具：" class="headerlink" title="1.9：常见的持续集成开源工具："></a>1.9：常见的持续集成开源工具：</h2><p>在公司的服务器安装某种程序，该程序用于按照特定格式和方式记录和保存公司多名开发人员不定期提交的源代码，且后期可以按照某种标记及方式对用户提交的数据进行还原。</p>
<h3 id="1-9-1：CVS-Concurrent-Version-System-："><a href="#1-9-1：CVS-Concurrent-Version-System-：" class="headerlink" title="1.9.1：CVS(Concurrent Version System)："></a>1.9.1：CVS(Concurrent Version System)：</h3><p>早期的集中式版本控制系统，现已基本淘汰</p>
<p>会出现数据提交后不完整的情况</p>
<h3 id="1-9-2：SVN-Subversion-–集中式版本控制系统"><a href="#1-9-2：SVN-Subversion-–集中式版本控制系统" class="headerlink" title="1.9.2：SVN(Subversion)–集中式版本控制系统"></a>1.9.2：SVN(Subversion)–集中式版本控制系统</h3><p>2000年开始开发，目标就是替代CVS集中式管理，依赖于网络，一台服务器集中管理目前依然有部分公司在使用。</p>
<h3 id="1-9-3：Gitlib—分布式版本控制系统"><a href="#1-9-3：Gitlib—分布式版本控制系统" class="headerlink" title="1.9.3：Gitlib—分布式版本控制系统"></a>1.9.3：Gitlib—分布式版本控制系统</h3><p>Linus在1991年创建了开源的Linux内核，从此Linux便不断快速发展，不过 Linux的壮大是离不开全世界的开发者的参与，这么多人在世界各地为Linux编写代码，那Linux内核的代码是如何管理的呢？事实是，在2002年以前，世界各地的志愿者把源代码文件通过diff的方式发给Linus，然后由Linus本人通过手工方式合并代码！你也许会想，为什么Linus不把Linux代码放到版本控制系统里呢？不是有CVS、SVN这些免费的版本控制系统吗？因为Linus坚定地反对CVS和SVN，这些集中式的版本控制系统不但速度慢，且必须联网才能使用，但是也有一些商用的版本控制系统，虽然比CVS、SVN好用，但那是付费的，和Linux的开源精神不符,不过，到了2002年，Linux系统已经发展了十年了，代码库之大让Linus很难继续通过手工方式管理了，社区的弟兄们也对这种方式表达了强烈不满，于是Linus选择了一个商业的版本控制系统BitKeeper，BitKeeper的东家BitMover公司出于人道主义精神，授权Linux社区免费使用这个版本控制系统,但是安定团结的大好局面在2005年就被打破了，原因是Linux社区牛人聚集，不免沾染了一些梁山好汉的江湖习气，开发Samba的Andrew试图破解BitKeeper的协议（这么干的其实也不只他一个），被BitMover公司发现了（监控工作做得不错！），于是BitMover公司怒了，要收回Linux社区的免费使用权,这时候其实Linus可以向BitMover公司道个歉，保证以后严格管教弟兄们，但这是不可能的，而且实际情况是Linus自己花了两周时间自己用C写了一个分布式版本控制系统，这就是Git！一个月之内，Linux内核的源码已经由Git管理了！牛是怎么定义的呢？大家可以体会一下,然后Git迅速成为最流行的分布式版本控制系统，尤其是2008年，GitHub网站上线了，它为开源项目免费提供Git存储，无数开源项目开始迁移至GitHub，包括jQuery，PHP，Ruby等等。</p>
<p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/006.png" alt="1552470485535"></p>
<p>​        <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552470496064.png" alt="1552470496064"></p>
<h2 id="1-10：版本控制系统分类："><a href="#1-10：版本控制系统分类：" class="headerlink" title="1.10：版本控制系统分类："></a>1.10：版本控制系统分类：</h2><h3 id="1-10-1：集中式版本控制系统："><a href="#1-10-1：集中式版本控制系统：" class="headerlink" title="1.10.1：集中式版本控制系统："></a>1.10.1：集中式版本控制系统：</h3><p>任何的提交和回滚都依赖于连接服务器服务器是单点</p>
<p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552471728487.png" alt="1552471728487"></p>
<h3 id="1-10-2：分布式版本控制系统："><a href="#1-10-2：分布式版本控制系统：" class="headerlink" title="1.10.2：分布式版本控制系统："></a>1.10.2：分布式版本控制系统：</h3><p>​                        </p>
<p>​              http/https/ssh/git              </p>
<p>Git在每个用户都有一个完整的服务器，然后在有一个中央服务器，用户可以先将代码提交到本地，没有网络也可以先提交到本地，然后在有网络的时候再提交到中央服务器，这样就大大方便了开发者，而相比CVS和SVN都是集中式的版本控制系统，工作的时候需要先从中央服务器获取最新的代码，改完之后需要提交，如果是一个比较大的文件则需要足够快的网络才能快速提交完成，而使用分布式的版本控制系统，每个用户都是一个完整的版本库，即使没有中央服务器也可以提交代码或者回滚，最终再把改好的代码提交至中央服务器进行合并即可。</p>
<p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552471841495.png" alt="1552471841495"></p>
<h1 id="二：Gitlab部署与使用："><a href="#二：Gitlab部署与使用：" class="headerlink" title="二：Gitlab部署与使用："></a>二：Gitlab部署与使用：</h1><h2 id="2-1：下载并部署gitlab："><a href="#2-1：下载并部署gitlab：" class="headerlink" title="2.1：下载并部署gitlab："></a>2.1：下载并部署gitlab：</h2><h3 id="2-1-1：Ubuntu-系统环境准备："><a href="#2-1-1：Ubuntu-系统环境准备：" class="headerlink" title="2.1.1：Ubuntu 系统环境准备："></a>2.1.1：Ubuntu 系统环境准备：</h3><h4 id="2-1-1-1：配置ubuntu-远程连接："><a href="#2-1-1-1：配置ubuntu-远程连接：" class="headerlink" title="2.1.1.1：配置ubuntu 远程连接："></a>2.1.1.1：配置ubuntu 远程连接：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">jack@ubuntu:~$ sudo su - root</span><br><span class="line">[sudo] password <span class="keyword">for</span> jack:</span><br><span class="line">root@ubuntu:~<span class="comment"># passwd  </span></span><br><span class="line">Enter new UNIX password: </span><br><span class="line">Retype new UNIX password: </span><br><span class="line">passwd: password updated successfully</span><br><span class="line">root@ubuntu:~<span class="comment"># vim /etc/ssh/sshd_config</span></span><br></pre></td></tr></table></figure>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552471871730.png" alt="1552471871730"></p>
<h4 id="2-1-1-2：配置ubuntu网卡和主机名："><a href="#2-1-1-2：配置ubuntu网卡和主机名：" class="headerlink" title="2.1.1.2：配置ubuntu网卡和主机名："></a>2.1.1.2：配置ubuntu网卡和主机名：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu:~<span class="comment"># cat  /etc/netplan/01-netcfg.yaml </span></span><br><span class="line"></span><br><span class="line">\<span class="comment"># This file describes the network interfaces available on your system</span></span><br><span class="line"></span><br><span class="line">\<span class="comment"># For more information, see netplan(5).</span></span><br><span class="line"></span><br><span class="line">network:</span><br><span class="line">  version: 2</span><br><span class="line">  renderer: networkd</span><br><span class="line">  ethernets:</span><br><span class="line">    eth0:</span><br><span class="line">      dhcp4: no</span><br><span class="line">      addresses: [192.168.8.2/21]</span><br><span class="line">      gateway4: 192.168.15.254</span><br><span class="line">      nameservers:</span><br><span class="line">        addresses: [192.168.15.254]</span><br><span class="line">root@ubuntu:~<span class="comment"># cat /etc/hostname </span></span><br><span class="line">jenkins.example.com</span><br><span class="line">root@ubuntu:~<span class="comment"># reboot</span></span><br></pre></td></tr></table></figure>
<h4 id="2-1-1-3：配置ubuntu-仓库："><a href="#2-1-1-3：配置ubuntu-仓库：" class="headerlink" title="2.1.1.3：配置ubuntu 仓库："></a>2.1.1.3：配置ubuntu 仓库：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu:~<span class="comment">#vim  /etc/apt/sources.list</span></span><br><span class="line"></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">root@jenkins:~<span class="comment"># apt  update</span></span><br><span class="line">root@jenkins:~<span class="comment"># apt install iproute2  ntpdate  tcpdump telnet traceroute nfs-kernel-server nfs-common  lrzsz tree  openssl libssl-dev libpcre3 libpcre3-dev zlib1g-dev ntpdate tcpdump telnet traceroute  gcc openssh-server lrzsz tree openssl libssl-dev libpcre3 libpcre3-dev zlib1g-dev ntpdate tcpdump telnet traceroute iotop unzip zip ipmitool</span></span><br></pre></td></tr></table></figure>
<h3 id="2-1-2：Centos-系统环境在准备："><a href="#2-1-2：Centos-系统环境在准备：" class="headerlink" title="2.1.2：Centos 系统环境在准备："></a>2.1.2：Centos 系统环境在准备：</h3><ul>
<li>1 gitlab-server    172.20.102.205</li>
<li>2 jenkins-server   172.20.102.222</li>
<li>3 tomcat-web1      172.20.102.228</li>
<li>4 tomcat-web2      172.20.102.240</li>
<li>5 keepalived+haproxy1         172.20.102.216</li>
<li>6 keepalived+haproxy2         172.20.102.253</li>
</ul>
<p>最小化服务器安装，配置如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\<span class="comment"># yum install vim gcc gcc-c++ wget net-tools lrzsz iotop lsof iotop bash-completion -y`</span></span><br></pre></td></tr></table></figure>
<p># yum install curl policycoreutils openssh-server openssh-clients postfix -y<br># wget -O /etc/yum.repos.d/epel.repo <a href="http://mirrors.aliyun.com/repo/epel-7.repo" target="_blank" rel="noopener">http://mirrors.aliyun.com/repo/epel-7.repo</a><br># systemctl disable firewalld<br># sed -i ‘/SELINUX/s/enforcing/disabled/‘ /etc/sysconfig/selinux<br># hostnamectl set-hostname gitlab.example.com<br># reboot<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">### 2.1.3：gitlab安装及使用：</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">安装包下载地址：https://packages.gitlab.com/gitlab/gitlab-ce   </span><br><span class="line">rpm包国内下载地址：https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/ </span><br><span class="line">本次安装版本为gitlab-ce-11.3.11-ce.0.el7.x86_64.rpm</span><br><span class="line"># wget https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/gitlab-ce-11.3.11-ce.0.el7.x86_64.rpm</span><br><span class="line"># rpm -ivh gitlab-ce-11.3.11-ce.0.el7.x86_64.rpm</span><br></pre></td></tr></table></figure></p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472028289.png" alt="1552472028289"></p>
<h4 id="2-1-3-1：gitlab配置："><a href="#2-1-3-1：gitlab配置：" class="headerlink" title="2.1.3.1：gitlab配置："></a>2.1.3.1：gitlab配置：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment">#grep "^[a-Z]" /etc/gitlab/gitlab.rb</span></span><br><span class="line">external_url <span class="string">'http://192.168.245.17'</span></span><br><span class="line">gitlab_rails[<span class="string">'smtp_enable'</span>] = <span class="literal">true</span></span><br><span class="line">gitlab_rails[<span class="string">'smtp_address'</span>] = <span class="string">"smtp.163.com"</span></span><br><span class="line">gitlab_rails[<span class="string">'smtp_port'</span>] = 25</span><br><span class="line">gitlab_rails[<span class="string">'smtp_user_name'</span>] = <span class="string">"htluhao@163.com"</span></span><br><span class="line">gitlab_rails[<span class="string">'smtp_password'</span>] = <span class="string">"luhao111"</span></span><br><span class="line">gitlab_rails[<span class="string">'smtp_domain'</span>] = <span class="string">"163.com"</span></span><br><span class="line">gitlab_rails[<span class="string">'smtp_authentication'</span>] = :login</span><br><span class="line">gitlab_rails[<span class="string">'smtp_enable_starttls_auto'</span>] = <span class="literal">true</span></span><br><span class="line">gitlab_rails[<span class="string">'smtp_tls'</span>] = <span class="literal">false</span></span><br><span class="line">gitlab_rails[<span class="string">'gitlab_email_from'</span>] = <span class="string">"htluhao@163.com"</span></span><br><span class="line">user[<span class="string">"git_user_email"</span>] = [htluhao@163.com</span><br></pre></td></tr></table></figure>
<h4 id="2-1-3-2：初始化服务："><a href="#2-1-3-2：初始化服务：" class="headerlink" title="2.1.3.2：初始化服务："></a>2.1.3.2：初始化服务：</h4><p>执行配置并启动服务：</p>
<p>`# gitlab-ctl  reconfigure #修改完配置文件要执行此操作`</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">\<span class="comment"># gitlab-ctl  start</span></span><br><span class="line"></span><br><span class="line">\<span class="comment">#     gitlab-ctl  stop</span></span><br><span class="line"></span><br><span class="line">\<span class="comment"># gitlab-ctl  restar</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472104713.png" alt="1552472104713"></p>
<h4 id="2-1-3-3：验证gitlab启动完成："><a href="#2-1-3-3：验证gitlab启动完成：" class="headerlink" title="2.1.3.3：验证gitlab启动完成："></a>2.1.3.3：验证gitlab启动完成：</h4><p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472112782.png" alt="1552472112782"></p>
<h4 id="2-1-3-4：验证端口及状态："><a href="#2-1-3-4：验证端口及状态：" class="headerlink" title="2.1.3.4：验证端口及状态："></a>2.1.3.4：验证端口及状态：</h4><p>80端口是在初始化gitlib的时候启动的，因此如果之前的有程序占用会导致初始</p>
<p>化失败或无法访问！</p>
<p>lsof -i:80</p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472121857.png" alt="1552472121857"></p>
<h4 id="2-1-3-5：登录gitlab-web界面："><a href="#2-1-3-5：登录gitlab-web界面：" class="headerlink" title="2.1.3.5：登录gitlab web界面："></a>2.1.3.5：登录gitlab web界面：</h4><p><a href="http://192.168.245.17/" target="_blank" rel="noopener">http://192.168.245.17/</a></p>
<p>登录web页面并设置密码,最少8位：</p>
<p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472136817.png" alt="1552472136817"></p>
<h4 id="2-1-3-6：登录gitlab："><a href="#2-1-3-6：登录gitlab：" class="headerlink" title="2.1.3.6：登录gitlab："></a>2.1.3.6：登录gitlab：</h4><p>登录，默认用户为root：</p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472153118.png" alt="1552472153118"></p>
<h4 id="2-1-3-7：默认首页："><a href="#2-1-3-7：默认首页：" class="headerlink" title="2.1.3.7：默认首页："></a>2.1.3.7：默认首页：</h4><p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472164158.png" alt="1552472164158"></p>
<h4 id="2-1-3-8：关闭账号注册："><a href="#2-1-3-8：关闭账号注册：" class="headerlink" title="2.1.3.8：关闭账号注册："></a>2.1.3.8：关闭账号注册：</h4><p>默认情况下可以直接注册账号，因此一般都关闭次功能：</p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472174867.png" alt="1552472174867"></p>
<p>取消账户注册功能之后点save</p>
<p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472184685.png" alt="1552472184685"></p>
<h4 id="2-1-3-9：验证是否还有注册选项："><a href="#2-1-3-9：验证是否还有注册选项：" class="headerlink" title="2.1.3.9：验证是否还有注册选项："></a>2.1.3.9：验证是否还有注册选项：</h4><p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472194997.png" alt="1552472194997"></p>
<h4 id="2-1-3-10：创建git账户："><a href="#2-1-3-10：创建git账户：" class="headerlink" title="2.1.3.10：创建git账户："></a>2.1.3.10：创建git账户：</h4><p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472207852.png" alt="1552472207852"></p>
<h4 id="2-1-3-11：重新设置密码："><a href="#2-1-3-11：重新设置密码：" class="headerlink" title="2.1.3.11：重新设置密码："></a>2.1.3.11：重新设置密码：</h4><p>使用第一次使用新账号登录要设置密码：</p>
<p>​     </p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472215518.png" alt="1552472215518"></p>
<p>通过邮件重置用户密码：</p>
<p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472226651.png" alt="1552472226651"></p>
<p>在收件箱打开邮件设置密码：</p>
<p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472238523.png" alt="1552472238523"></p>
<p>​<br> 设置密码：</p>
<p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472247536.png" alt="1552472247536"></p>
<p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472273557.png" alt="1552472273557"></p>
<p>或者管理员创建账号时指定密码</p>
<h4 id="2-1-3-12：创建组："><a href="#2-1-3-12：创建组：" class="headerlink" title="2.1.3.12：创建组："></a>2.1.3.12：创建组：</h4><p>使用管理员root创建组，一个组里面可以有多个项目分支，可以将开发添加到组里面进行设置权限，不同的组就是公司不同的开发项目或者服务模块，不同的组添加不同的开发即可实现对开发设置权限的管理。</p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472288402.png" alt="1552472288402"></p>
<h4 id="2-1-3-13：使用管理员创建项目："><a href="#2-1-3-13：使用管理员创建项目：" class="headerlink" title="2.1.3.13：使用管理员创建项目："></a>2.1.3.13：使用管理员创建项目：</h4><p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472296901.png" alt="1552472296901"></p>
<p>使用管理员创建项目：</p>
<p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472307531.png" alt="1552472307531"></p>
<p>创建后的项目效果：</p>
<p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472318834.png" alt="1552472318834"></p>
<h4 id="2-1-3-14：将用户添加到组："><a href="#2-1-3-14：将用户添加到组：" class="headerlink" title="2.1.3.14：将用户添加到组："></a>2.1.3.14：将用户添加到组：</h4><p><a href="https://docs.gitlab.com/ee/user/permissions.html" target="_blank" rel="noopener">https://docs.gitlab.com/ee/user/permissions.html</a>  (更多权限)</p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472328177.png" alt="1552472328177"></p>
<p>2.1.3.15：创建一个测试页</p>
<p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472346885.png" alt="1552472346885"></p>
<p>添加一个页面：</p>
<p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472360149.png" alt="1552472360149"></p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472367128.png" alt="1552472367128"></p>
<h4 id="2-1-3-15：git客户端测试clone项目："><a href="#2-1-3-15：git客户端测试clone项目：" class="headerlink" title="2.1.3.15：git客户端测试clone项目："></a>2.1.3.15：git客户端测试clone项目：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment">#git clone http://192.168.245.17/test-service/test-project.git</span></span><br><span class="line"></span><br><span class="line">Cloning into <span class="string">'test-project'</span>...</span><br><span class="line"></span><br><span class="line">Username <span class="keyword">for</span> <span class="string">'http://192.168.245.17'</span>: luhao</span><br><span class="line"></span><br><span class="line">Password <span class="keyword">for</span> <span class="string">'http://luhao@192.168.245.17'</span>: </span><br><span class="line"></span><br><span class="line">remote: Enumerating objects: 3, <span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">remote: Counting objects: 100% (3/3), <span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">remote: Total 3 (delta 0), reused 0 (delta 0)</span><br><span class="line"></span><br><span class="line">Unpacking objects: 100% (3/3), <span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">[root@gitlab ~]<span class="comment">#cat test-project/index.html</span></span><br></pre></td></tr></table></figure>
<h1>123432432411</h1>



<p>编辑文件并测试提交：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment">#cd test-project/`</span></span><br></pre></td></tr></table></figure>
<p>[root@gitlab test-project]#git config –global user.name “luhao”</p>
<p>[root@gitlab test-project]#git config –global user.email <a href="mailto:htluhao@163.com" target="_blank" rel="noopener">htluhao@163.com</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">[root@gitlab test-project]#vim index.html </span><br><span class="line"></span><br><span class="line">&lt;h1&gt;123432432411&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;123432432411&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;123432432411&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;123432432411&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;123432432411&lt;/h1&gt;</span><br></pre></td></tr></table></figure></p>
<p>[root@gitlab test-project]#git add index.html </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab <span class="built_in">test</span>-project]<span class="comment">#git commit -m "v1"</span></span><br><span class="line"></span><br><span class="line">[master 5ccda6e] v1</span><br><span class="line"></span><br><span class="line"> 1 file changed, 5 insertions(+), 1 deletion(-)`</span><br></pre></td></tr></table></figure>
<p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472522711.png" alt="1552472522711"></p>
<h4 id="2-1-3-16-git-web端验证数据："><a href="#2-1-3-16-git-web端验证数据：" class="headerlink" title="2.1.3.16:git web端验证数据："></a>2.1.3.16:git web端验证数据：</h4><p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552472512837.png" alt="1552472512837"></p>
<h4 id="2-1-3-17：git常用命令："><a href="#2-1-3-17：git常用命令：" class="headerlink" title="2.1.3.17：git常用命令："></a>2.1.3.17：git常用命令：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name “name“ <span class="comment">#设置全局用户名</span></span><br><span class="line">git config --global user.email [xxx@xx.com ](mailto:xxx@xx.com)<span class="comment">#设置全局邮箱</span></span><br><span class="line">git config --global –list <span class="comment">#列出用户全局设置</span></span><br><span class="line">git add index.html / . <span class="comment">#添加指定文件、目录或当前目录下所有数据到暂存区</span></span><br><span class="line">git commit -m “11“ <span class="comment">#提交文件到工作区</span></span><br><span class="line">git status <span class="comment">#查看工作区的状态</span></span><br><span class="line">git push <span class="comment">#提交代码到服务器</span></span><br><span class="line">git pull <span class="comment">#获取代码到本地</span></span><br><span class="line">git <span class="built_in">log</span> <span class="comment">#查看操作日志</span></span><br><span class="line">vim .gitignore <span class="comment">#定义忽略文件</span></span><br><span class="line">git reset --hard HEAD^^ <span class="comment">#git版本回滚， HEAD为当前版本，加一个^为上一个，^^为上上一个版本</span></span><br><span class="line">git reflog <span class="comment"># #获取每次提交的ID，可以使用--hard根据提交的ID进行版本回退</span></span><br><span class="line">git reset --hard 5ae4b06 <span class="comment">#回退到指定id的版本</span></span><br><span class="line">git branch <span class="comment">#查看当前所处的分支</span></span><br><span class="line">git checkout  -b develop <span class="comment">#创建并切换到一个新分支</span></span><br><span class="line">git checkout   develop <span class="comment">#切换分支</span></span><br></pre></td></tr></table></figure>
<h1 id="三：部署web服务器环境："><a href="#三：部署web服务器环境：" class="headerlink" title="三：部署web服务器环境："></a>三：部署web服务器环境：</h1><h4 id="3-1-部署tomcat环境"><a href="#3-1-部署tomcat环境" class="headerlink" title="3.1  部署tomcat环境"></a>3.1  部署tomcat环境</h4><p>各wenb服务器准备tomcat运行环境：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@tomcat-web1 /]<span class="comment"># useradd www -u 2000</span></span><br><span class="line">[root@tomcat-web1 /]<span class="comment">#  mkdir /apps &amp;&amp; cd /apps</span></span><br><span class="line">[root@tomcat-web1 apps]<span class="comment"># tar xvf jdk-8u192-linux-x64.tar.gz </span></span><br><span class="line">[root@tomcat-web1 /]<span class="comment">#  ln -sv /apps/jdk1.8.0_192/ /apps/jdk</span></span><br><span class="line">[root@tomcat-web1 /]<span class="comment">#  vim /etc/profile</span></span><br><span class="line"><span class="built_in">export</span> HISTTIMEFORMAT=<span class="string">"%F %T whoami "</span></span><br><span class="line"><span class="built_in">export</span> <span class="built_in">export</span> LANG=<span class="string">"en_US.utf-8"</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/apps/jdk</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line"></span><br><span class="line">[root@tomcat-web1 apps]<span class="comment"># ln -sv /apps/jdk1.8.0_192/ /apps/jdk</span></span><br><span class="line">‘/apps/jdk’ -&gt; ‘/apps/jdk1.8.0_192/’</span><br><span class="line">[root@tomcat-web1 apps]<span class="comment"># source /etc/profile</span></span><br><span class="line">[root@tomcat-web1 apps]<span class="comment"># java -version</span></span><br><span class="line"></span><br><span class="line">java version <span class="string">"1.8.0_192"</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_192-b12)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.192-b12, mixed mode)</span><br><span class="line">\<span class="comment"># tar xvf  apache-tomcat-8.5.37.tar.gz</span></span><br><span class="line">\<span class="comment"># ln -sv /apps/apache-tomcat-8.5.37 /apps/tomcat</span></span><br><span class="line">[root@tomcat-web2 apps]<span class="comment"># mkdir /data/tomcat_webdir /data/tomcat_appdir -pv</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim /apps/apache-tomcat-8.5.37/conf/server.xml</span><br><span class="line">#配置tomcat配置文件：</span><br><span class="line">appBase=&quot;/data/tomcat_webdir/&quot;    unpackWARs=&quot;false&quot; autoDeploy=&quot;false&quot;</span><br><span class="line">cd /data/tomcat_webdir/</span><br><span class="line">mkdir myapp</span><br><span class="line">vim myapp/index.html</span><br><span class="line">写入</span><br><span class="line">[root@tomcat-web1 ~]# cat /data/tomcat_webdir/myapp/index.html</span><br></pre></td></tr></table></figure>
<p>&lt;!DOCTYPE html&gt;</p>
<html lang="en"><br><head><meta name="generator" content="Hexo 3.8.0"><br>        <title>dsadasd</title><br></head><br><body><br><h1>tomcat1</h1><br><h1></h1><br><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body><br></html>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cp /apps/tomcat/webapps/* /data/tomcat_webdir/ -r -a</span><br><span class="line">rz上传脚本 tomcat</span><br><span class="line">cp /root/tomcat /etc/init.d/</span><br><span class="line">chmod a+x /etc/init.d/tomcat </span><br><span class="line">useradd tomcat -u 2001</span><br><span class="line">passwd tomcat</span><br><span class="line">su - tomcat</span><br><span class="line">/etc/init.d/tomcat start</span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552635507551.png" alt="1552635507551"></p>
<p>打开172.20.102.228:8080/myapp/确认各web服务器访问正常：</p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552548720334.png" alt="1552548720334"></p>
<p>​<br> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552548757681.png" alt="1552548757681"></p>
<h4 id="3-2-部署keepalived"><a href="#3-2-部署keepalived" class="headerlink" title="3.2 部署keepalived"></a>3.2 部署keepalived</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install libnfnetlink-devel libnfnetlink ipvsadm libnl libnl-devel libnl3 libnl3-devel lm_sensors-libs net-snmp-agent-libs net-snmp-libs open server openssh-clients openssl openssl-devel automake iproute</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编译安装</span></span><br><span class="line">\<span class="comment"># cd keepalived-2.0.7 &amp;&amp; ./configure --prefix=/usr/local/keepalived --disable-fwmark</span></span><br><span class="line">\<span class="comment"># make &amp;&amp; amke install</span></span><br><span class="line">\<span class="comment"># # mkdir /usr/local/keepalived/etc/sysconfig –p &amp;&amp; cp keepalived/etc/init.d/keepalived.rh.init /usr/local/keepalived/etc/sysconfig/keepalived</span></span><br><span class="line">\<span class="comment"># cp keepalived/keepalived.service /usr/lib/systemd/system/</span></span><br><span class="line">\<span class="comment"># mkdir /usr/local/keepalived/sbin &amp;&amp; cp bin/keepalived /usr/local/keepalived/sbin/keepalived</span></span><br><span class="line">\<span class="comment"># mkdir /etc/keepalived</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#本次采用yum安装</span></span><br><span class="line">yum install keepalived -y</span><br><span class="line"></span><br><span class="line">haproxy1 上的keepalived为MASTER</span><br><span class="line">haproxy2 上的keepalived为BACKUP</span><br><span class="line">地址都为172.20.102.248</span><br><span class="line">做keepalived高可用，使用ifconfig可是两个keepalived存活性是否生效两台只允许有一个eth0:1，停掉一台，另一台开始服务</span><br><span class="line"></span><br><span class="line">\<span class="comment"># vim /etc/keepalived/keepalived.conf</span></span><br><span class="line"></span><br><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line">    state MASTER</span><br><span class="line">    interface eth0</span><br><span class="line">    virtual_router_id 51</span><br><span class="line">    priority 90</span><br><span class="line">    advert_int 1</span><br><span class="line">    authentication &#123;</span><br><span class="line">        auth_type PASS</span><br><span class="line">        auth_pass 1111</span><br><span class="line">    &#125;</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">        172.20.102.248 dev eth0 label eth0:1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[root@haproxy2 ~]<span class="comment"># systemctl restart keepalived</span></span><br><span class="line">[root@haproxy2 ~]<span class="comment"># systemctl enable keepalived</span></span><br></pre></td></tr></table></figure>
<p> haproxy2<img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552628612457.png" alt="1552628612457"></p>
<h4 id="3-3部署haproxy："><a href="#3-3部署haproxy：" class="headerlink" title="3.3部署haproxy："></a>3.3部署haproxy：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">#编译安装</span><br><span class="line"># tar xvf haproxy-1.8.13.tar.gz</span><br><span class="line"># cd haproxy-1.8.13</span><br><span class="line"># make ARCH=x86_64 TARGET=linux2628 USE_PCRE=1 USE_OPENSSL=1 USE_ZLIB=1 USE_SYSTEMD=1 USE_CPU_AFFINITY=1 PREFIX=/usr/local/haproxy</span><br><span class="line"># make install PREFIX=/usr/local/haproxy</span><br><span class="line"># vim /usr/lib/systemd/system/haproxy.service</span><br><span class="line">[Unit]</span><br><span class="line">Description=HAProxy Load Balancer</span><br><span class="line">After=syslog.target network.target</span><br><span class="line">[Service]</span><br><span class="line">#支持多配置文件读取，类似于从侧面是实现配置文件的include功能。</span><br><span class="line">ExecStartPre=/usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -f /etc/haproxy/conf -c -q</span><br><span class="line">ExecStart=/usr/sbin/haproxy -Ws -f /etc/haproxy/haproxy.cfg -f /etc/haproxy/conf -p /run/haproxy.pid</span><br><span class="line">ExecReload=/bin/kill -USR2 $MAINPID</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br><span class="line"># mkdir /etc/haproxy</span><br><span class="line">本次采用yum 安装</span><br><span class="line">yum install haproxy -y</span><br><span class="line">vim /etc/haproxy/haproxy.cfg</span><br><span class="line"></span><br><span class="line">global</span><br><span class="line">    # to have these messages end up in /var/log/haproxy.log you will</span><br><span class="line">    # need to:</span><br><span class="line">    #</span><br><span class="line">    # 1) configure syslog to accept network log events.  This is done</span><br><span class="line">    #    by adding the &apos;-r&apos; option to the SYSLOGD_OPTIONS in</span><br><span class="line">    #    /etc/sysconfig/syslog</span><br><span class="line">    #</span><br><span class="line">    # 2) configure local2 events to go to the /var/log/haproxy.log</span><br><span class="line">    #   file. A line like the following can be added to</span><br><span class="line">    #   /etc/sysconfig/syslog</span><br><span class="line">    #</span><br><span class="line">    #    local2.*                       /var/log/haproxy.log</span><br><span class="line">    #</span><br><span class="line">    log         127.0.0.1 local2</span><br><span class="line"></span><br><span class="line">    chroot      /var/lib/haproxy</span><br><span class="line">    pidfile     /var/run/haproxy.pid</span><br><span class="line">    maxconn     4000</span><br><span class="line">    user        haproxy</span><br><span class="line">    group       haproxy</span><br><span class="line">    daemon</span><br><span class="line"></span><br><span class="line">    # turn on stats unix socket</span><br><span class="line">    stats socket /var/lib/haproxy/stats</span><br><span class="line"></span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line"># common defaults that all the &apos;listen&apos; and &apos;backend&apos; sections will</span><br><span class="line"># use if not designated in their block</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line">defaults</span><br><span class="line">    mode                    http</span><br><span class="line">    log                     global</span><br><span class="line">    option                  httplog</span><br><span class="line">    option                  dontlognull</span><br><span class="line">    option http-server-close</span><br><span class="line">    option forwardfor       except 127.0.0.0/8</span><br><span class="line">    option                  redispatch</span><br><span class="line">    retries                 3</span><br><span class="line">    timeout http-request    10s</span><br><span class="line">    timeout queue           1m</span><br><span class="line">    timeout connect         10s</span><br><span class="line">    timeout client          1m</span><br><span class="line">    timeout server          1m</span><br><span class="line">    timeout http-keep-alive 10s</span><br><span class="line">    timeout check           10s</span><br><span class="line">    maxconn                 3000</span><br><span class="line"></span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line"># main frontend which proxys to the backends</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line">#此处需要app或者官网访问入口</span><br><span class="line">listen myapp</span><br><span class="line">    bind 172.20.102.248：80</span><br><span class="line">    balance     roundrobin</span><br><span class="line">    server  172.20.102.228 172.20.102.228:8080 check</span><br><span class="line">    server  172.20.102.216 172.20.102.240:8080 check </span><br><span class="line">    </span><br><span class="line">[root@haproxy2 ~]# systemctl restart haproxy</span><br><span class="line">[root@haproxy2 ~]# systemctl enable haproxy</span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552625864421.png" alt="1552625864421"></p>
<p>注释：</p>
<p>1 gitlab-server      172.20.102.205<br>2 jenkins-server   172.20.102.222<br>3 tomcat-web1      172.20.102.228<br>4 tomcat-web2      172.20.102.240<br>5 haproxy1             172.20.102.216<br>6 haproxy2             172.20.102.253 </p>
<h4 id="3-3-1-测试haproxy反向代理web服务器："><a href="#3-3-1-测试haproxy反向代理web服务器：" class="headerlink" title="3.3.1: 测试haproxy反向代理web服务器："></a>3.3.1: 测试haproxy反向代理web服务器：</h4><p>编辑本机hosts文件，将myapp.web.com解析到对应的IP负载IP：</p>
<p>C:\Windows\System32\drivers\etc\hosts</p>
<p>172.20.102.101 myapp.web.com</p>
<h4 id="3-3-2-记录HAProxy访问日志："><a href="#3-3-2-记录HAProxy访问日志：" class="headerlink" title="3.3.2: 记录HAProxy访问日志："></a>3.3.2: 记录HAProxy访问日志：</h4><p># vim /etc/rsyslog.conf：</p>
<p>14 # Provides UDP syslog reception</p>
<p>15 $ModLoad imudp #去掉注释</p>
<p>16 $UDPServerRun 514 #去掉注释</p>
<p>18 # Provides TCP syslog reception</p>
<p>19 $ModLoad imtcp #去掉注释</p>
<p>20 $InputTCPServerRun 514 #去掉注释</p>
<p>93 local3.* /var/log/haproxy.log</p>
<p># systemctl restart rsyslog</p>
<p>log 127.0.0.1 local3 info #global部分</p>
<p>listen web_port</p>
<p>bind 0.0.0.0:80</p>
<p>mode http</p>
<p>log global</p>
<p>option httplog</p>
<p>server 192.168.7.103 192.168.7.103:8080 check inter 3000 fall 2 rise 5</p>
<p>server 192.168.7.104 192.168.7.104:8080 check inter 3000 fall 2 rise 5</p>
<p>​<br> 重启rsyslog和haproxy服务，验证/var/log/haproxy.log可以记录日志：</p>
<h4 id="3-3-3-验证HAProxy统计页面："><a href="#3-3-3-验证HAProxy统计页面：" class="headerlink" title="3.3.3: 验证HAProxy统计页面："></a>3.3.3: 验证HAProxy统计页面：</h4><p><a href="http://myapp.web.com:9009/haproxy-status" target="_blank" rel="noopener">http://myapp.web.com:9009/haproxy-status</a></p>
<p>​        </p>
<h4 id="3-3-4-验证haproxy代理web服务器："><a href="#3-3-4-验证haproxy代理web服务器：" class="headerlink" title="3.3.4.: 验证haproxy代理web服务器："></a>3.3.4.: 验证haproxy代理web服务器：</h4><p><a href="http://myapp.web.com/myapp/" target="_blank" rel="noopener">http://myapp.web.com/myapp/</a></p>
<h1 id="四：Jenkins部署与基础配置："><a href="#四：Jenkins部署与基础配置：" class="headerlink" title="四：Jenkins部署与基础配置："></a>四：Jenkins部署与基础配置：</h1><h2 id="4-1：配置java环境并部署jenkins："><a href="#4-1：配置java环境并部署jenkins：" class="headerlink" title="4.1：配置java环境并部署jenkins："></a>4.1：配置java环境并部署jenkins：</h2><h3 id="4-1-1：java环境配置："><a href="#4-1-1：java环境配置：" class="headerlink" title="4.1.1：java环境配置："></a>4.1.1：java环境配置：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost src]# tar xvf jdk-8u192-linux-x64.tar.gz</span><br><span class="line"></span><br><span class="line">[root@localhost src]#ln -sv /usr/local/src/jdk1.8.0_192/ /usr/local/jdk</span><br><span class="line"></span><br><span class="line">[root@localhost src]# vim /etc/profile</span><br><span class="line"></span><br><span class="line">export JAVA_HOME=/usr/local/jdk</span><br><span class="line"></span><br><span class="line">export PATH=$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH</span><br><span class="line"></span><br><span class="line">export CLASSPATH=.$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib:$JAVA_HOME/lib/tools.jar</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">[root@localhost src]#source /etc/profile</span><br><span class="line"></span><br><span class="line">[root@localhost src]#java -version</span><br><span class="line"></span><br><span class="line">java version &quot;1.8.0_192&quot;</span><br><span class="line"></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_192-b12)</span><br><span class="line"></span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.192-b12, mixed mode)</span><br></pre></td></tr></table></figure>
<h3 id="4-1-2：启动Jenkins"><a href="#4-1-2：启动Jenkins" class="headerlink" title="4.1.2：启动Jenkins"></a>4.1.2：启动Jenkins</h3><h4 id="4-1-2-1：通过jar包直接启动jenkins："><a href="#4-1-2-1：通过jar包直接启动jenkins：" class="headerlink" title="4.1.2.1：通过jar包直接启动jenkins："></a>4.1.2.1：通过jar包直接启动jenkins：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># java \</span><br><span class="line"></span><br><span class="line">-Dcom.sun.management.jmxremote \</span><br><span class="line"></span><br><span class="line">-Dcom.sun.management.jmxremote.port=12345 \</span><br><span class="line"></span><br><span class="line">-Dcom.sun.management.jmxremote.authenticate=false \</span><br><span class="line"></span><br><span class="line">-Dcom.sun.management.jmxremote.ssl=false \</span><br><span class="line"></span><br><span class="line">-Djava.rmi.server.hostname=&quot;192.168.245.27  &quot; \</span><br><span class="line"></span><br><span class="line">-jar jenkins-2.138.3.war &amp;</span><br><span class="line"></span><br><span class="line">此方法失败了，所以通过安装rpm包安装了</span><br></pre></td></tr></table></figure>
<h4 id="4-1-2-2：rpm包安装jenkins配置："><a href="#4-1-2-2：rpm包安装jenkins配置：" class="headerlink" title="4.1.2.2：rpm包安装jenkins配置："></a>4.1.2.2：rpm包安装jenkins配置：</h4><p>rz<br>rpm -ivh jenkins-2.138.3-1.1.noarch.rpm<br>grep -v “#” /etc/sysconfig/jenkins  | grep -v “^$”<br>vim /etc/sysconfig/jenkins </p>
<p>JENKINS_HOME=”/var/lib/jenkins”<br>JENKINS_JAVA_CMD=””<br>JENKINS_USER=”jenkins”<br>JENKINS_JAVA_OPTIONS=”-Djava.awt.headless=true”<br>JENKINS_PORT=”8080”<br>JENKINS_LISTEN_ADDRESS=””<br>JENKINS_HTTPS_PORT=””<br>JENKINS_HTTPS_KEYSTORE=””<br>JENKINS_HTTPS_KEYSTORE_PASSWORD=””<br>JENKINS_HTTPS_LISTEN_ADDRESS=””<br>JENKINS_DEBUG_LEVEL=”5”<br>JENKINS_ENABLE_ACCESS_LOG=”no”<br>JENKINS_HANDLER_MAX=”100”<br>JENKINS_HANDLER_IDLE=”20”<br>JENKINS_ARGS=””</p>
<p>systemctl restart jenkins</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@s1 ~]<span class="comment"># grep -v "#" /etc/sysconfig/jenkins  | grep -v "^$"</span></span><br><span class="line"></span><br><span class="line">JENKINS_HOME=<span class="string">"/var/lib/jenkins"</span></span><br><span class="line">JENKINS_JAVA_CMD=<span class="string">""</span></span><br><span class="line">JENKINS_USER=<span class="string">"root"</span></span><br><span class="line">JENKINS_JAVA_OPTIONS=<span class="string">"-Djava.awt.headless=true \</span></span><br><span class="line"><span class="string">-Dcom.sun.management.jmxremote \</span></span><br><span class="line"><span class="string">-Dcom.sun.management.jmxremote.port=12345 \</span></span><br><span class="line"><span class="string">-Dcom.sun.management.jmxremote.authenticate=false \</span></span><br><span class="line"><span class="string">-Dcom.sun.management.jmxremote.ssl=false \</span></span><br><span class="line"><span class="string">-Djava.rmi.server.hostname="</span>192.168.245.27<span class="string">" </span></span><br><span class="line"><span class="string">"</span></span><br><span class="line">JENKINS_PORT=<span class="string">"8080"</span></span><br><span class="line">JENKINS_LISTEN_ADDRESS=<span class="string">""</span></span><br><span class="line">JENKINS_HTTPS_PORT=<span class="string">""</span></span><br><span class="line">JENKINS_HTTPS_KEYSTORE=<span class="string">""</span></span><br><span class="line">JENKINS_HTTPS_KEYSTORE_PASSWORD=<span class="string">""</span></span><br><span class="line">JENKINS_HTTPS_LISTEN_ADDRESS=<span class="string">""</span></span><br><span class="line">JENKINS_DEBUG_LEVEL=<span class="string">"5"</span></span><br><span class="line">JENKINS_ENABLE_ACCESS_LOG=<span class="string">"no"</span></span><br><span class="line">JENKINS_HANDLER_MAX=<span class="string">"100"</span></span><br><span class="line">JENKINS_HANDLER_IDLE=<span class="string">"20"</span></span><br><span class="line">JENKINS_ARGS=<span class="string">""</span></span><br></pre></td></tr></table></figure>
<h3 id="4-1-3-Jenkins-启动过程："><a href="#4-1-3-Jenkins-启动过程：" class="headerlink" title="4.1.3:Jenkins 启动过程："></a>4.1.3:Jenkins 启动过程：</h3><p>​                                          <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552642826794.png" alt="1552642826794">        </p>
<h3 id="4-1-4：访问jenkins-页面"><a href="#4-1-4：访问jenkins-页面" class="headerlink" title="4.1.4：访问jenkins 页面"></a>4.1.4：访问jenkins 页面</h3><p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552642838623.png" alt="1552642838623"></p>
<h3 id="4-1-5：选择安装jenkins插件："><a href="#4-1-5：选择安装jenkins插件：" class="headerlink" title="4.1.5：选择安装jenkins插件："></a>4.1.5：选择安装jenkins插件：</h3><p>​        </p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552642848919.png" alt="1552642848919"></p>
<h3 id="4-1-6：插件安装过程中："><a href="#4-1-6：插件安装过程中：" class="headerlink" title="4.1.6：插件安装过程中："></a>4.1.6：插件安装过程中：</h3><p>插件安装过程中。。，如果因为某种原因导致有有安装失败的插件，没有关系，可以后期再单独安装</p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552642861246.png" alt="1552642861246"></p>
<h3 id="4-1-7：创建jenkins管理员："><a href="#4-1-7：创建jenkins管理员：" class="headerlink" title="4.1.7：创建jenkins管理员："></a>4.1.7：创建jenkins管理员：</h3><p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552642970678.png" alt="1552642970678"></p>
<h3 id="4-1-8：配置jenkins-URL："><a href="#4-1-8：配置jenkins-URL：" class="headerlink" title="4.1.8：配置jenkins URL："></a>4.1.8：配置jenkins URL：</h3><p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/C:/Users\Administrator\AppData\Roaming\Typora\typora-user-images\1552642902559.png" alt="1552642902559"></p>
<h3 id="4-1-9：配置完成并登陆jenkins："><a href="#4-1-9：配置完成并登陆jenkins：" class="headerlink" title="4.1.9：配置完成并登陆jenkins："></a>4.1.9：配置完成并登陆jenkins：</h3><p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552642983156.png" alt="1552642983156"></p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552642990899.png" alt="1552642990899"></p>
<h3 id="4-1-10：登陆jenkins界面："><a href="#4-1-10：登陆jenkins界面：" class="headerlink" title="4.1.10：登陆jenkins界面："></a>4.1.10：登陆jenkins界面：</h3><p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643006981.png" alt="1552643006981"></p>
<h3 id="4-1-11：jenkins插件管理及安装："><a href="#4-1-11：jenkins插件管理及安装：" class="headerlink" title="4.1.11：jenkins插件管理及安装："></a>4.1.11：jenkins插件管理及安装：</h3><h4 id="4-1-11-1：插件安装目录："><a href="#4-1-11-1：插件安装目录：" class="headerlink" title="4.1.11.1：插件安装目录："></a>4.1.11.1：插件安装目录：</h4><p>插件下载地址：<a href="http://updates.jenkins-ci.org/download/plugins/" target="_blank" rel="noopener">http://updates.jenkins-ci.org/download/plugins/</a></p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643017898.png" alt="1552643017898"></p>
<h4 id="4-1-11-2：安装插件："><a href="#4-1-11-2：安装插件：" class="headerlink" title="4.1.11.2：安装插件："></a>4.1.11.2：安装插件：</h4><p>搜索需要gitlab的插件并安装：</p>
<p>gitlab和Blue Ocean</p>
<p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643030371.png" alt="1552643030371"></p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643037904.png" alt="1552643037904"></p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643054619.png" alt="1552643054619"></p>
<h3 id="4-1-12：配置jenkins-权限管理："><a href="#4-1-12：配置jenkins-权限管理：" class="headerlink" title="4.1.12：配置jenkins 权限管理："></a>4.1.12：配置jenkins 权限管理：</h3><p>基于角色的权限管理，先创建角色和用户，给角色授权，然后把用户管理到角色。</p>
<h4 id="4-1-12-1：安装插件："><a href="#4-1-12-1：安装插件：" class="headerlink" title="4.1.12.1：安装插件："></a>4.1.12.1：安装插件：</h4><p> Role-based <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643075784.png" alt="1552643075784"></p>
<h4 id="4-1-12-2：创建新用户："><a href="#4-1-12-2：创建新用户：" class="headerlink" title="4.1.12.2：创建新用户："></a>4.1.12.2：创建新用户：</h4><p>Jenkins—系统管理—管理用户：</p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643101167.png" alt="1552643101167"></p>
<h4 id="4-1-12-3：更改认证方式："><a href="#4-1-12-3：更改认证方式：" class="headerlink" title="4.1.12.3：更改认证方式："></a>4.1.12.3：更改认证方式：</h4><p>Jenkins—系统管理—全局安全配置</p>
<p>默认创建的用户登录后可以做任何操作，取决于默认的认证授权方式。</p>
<p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643120269.png" alt="1552643120269"></p>
<p>  设置角色认证后，<strong>在进行角色授权之后才能退出浏览器，否则会导致账号登陆不上</strong><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552648275024.png" alt="1552648275024"></p>
<h4 id="4-1-12-4：创建角色："><a href="#4-1-12-4：创建角色：" class="headerlink" title="4.1.12.4：创建角色："></a>4.1.12.4：创建角色：</h4><p>Jenkins—系统管理–Manage and Assign Roles</p>
<p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552647914080.png" alt="1552647914080"></p>
<h4 id="4-1-12-5：添加规则组："><a href="#4-1-12-5：添加规则组：" class="headerlink" title="4.1.12.5：添加规则组："></a>4.1.12.5：添加规则组：</h4><p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643144924.png" alt="1552643144924"></p>
<h4 id="4-1-12-6：对组分配权限："><a href="#4-1-12-6：对组分配权限：" class="headerlink" title="4.1.12.6：对组分配权限："></a>4.1.12.6：对组分配权限：</h4><p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643154495.png" alt="1552643154495"></p>
<h4 id="4-1-12-7：将用户关联到规则组："><a href="#4-1-12-7：将用户关联到规则组：" class="headerlink" title="4.1.12.7：将用户关联到规则组："></a>4.1.12.7：将用户关联到规则组：</h4><p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552648051153.png" alt="1552648051153"></p>
<h4 id="4-1-12-8：测试普通用户登录："><a href="#4-1-12-8：测试普通用户登录：" class="headerlink" title="4.1.12.8：测试普通用户登录："></a>4.1.12.8：测试普通用户登录：</h4><p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552648342809.png" alt="1552648342809"></p>
<p>登录成功之的界面，没有系统管理权限，只能执行被授权过的job且没有了管理员权限。</p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643193611.png" alt="1552643193611"></p>
<h3 id="4-1-13：jenkins-邮箱配置："><a href="#4-1-13：jenkins-邮箱配置：" class="headerlink" title="4.1.13：jenkins 邮箱配置："></a>4.1.13：jenkins 邮箱配置：</h3><h4 id="4-1-13-1：生成QQ邮箱登录授权码："><a href="#4-1-13-1：生成QQ邮箱登录授权码：" class="headerlink" title="4.1.13.1：生成QQ邮箱登录授权码："></a>4.1.13.1：生成QQ邮箱登录授权码：</h4><p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643209319.png" alt="1552643209319"></p>
<h4 id="4-1-13-2：配置jenkins管理员邮箱："><a href="#4-1-13-2：配置jenkins管理员邮箱：" class="headerlink" title="4.1.13.2：配置jenkins管理员邮箱："></a>4.1.13.2：配置jenkins管理员邮箱：</h4><p>Jenkins—系统管理—系统设置：</p>
<p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643219014.png" alt="1552643219014"></p>
<h4 id="4-1-13-3：发件配置："><a href="#4-1-13-3：发件配置：" class="headerlink" title="4.1.13.3：发件配置："></a>4.1.13.3：发件配置：</h4><p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643230054.png" alt="1552643230054"></p>
<h4 id="4-1-13-4：测试发送邮件："><a href="#4-1-13-4：测试发送邮件：" class="headerlink" title="4.1.13.4：测试发送邮件："></a>4.1.13.4：测试发送邮件：</h4><p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643240019.png" alt="1552643240019"></p>
<h2 id="4-2：基于ssh-key拉取代码："><a href="#4-2：基于ssh-key拉取代码：" class="headerlink" title="4.2：基于ssh key拉取代码："></a>4.2：基于ssh key拉取代码：</h2><h3 id="4-2-1：添加ssh-key："><a href="#4-2-1：添加ssh-key：" class="headerlink" title="4.2.1：添加ssh key："></a>4.2.1：添加ssh key：</h3><p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643253854.png" alt="1552643253854"></p>
<p>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC3niuTNTXCA4zoltRTu+qDMOyF0xglYFxIIZMolCH2+Ma3L4v/D72WascVBD4LrkJM3S6KTSLn4M4+7l+9fe5LaZu0WSD2Se2N0FVcPFsYOK5ZwPoWiL83R5T2bN4j69G7cAtHM5X5WOAuJs6ArSBSxsSnyeFnUFNw3rbmkCCt2TvrsmqTzEMA1PDQno/7wB3n8JfxjaKp5oHNPQrwN0p0lGuUMSxGSNjCEIiexxqpyrJ0DPShs+XximSOO7noWbZq2nMhsH7yWdwKN3qD00U52ACDijeAyKVa4ByQntDIPeCr8gdUZiT8rbfXtix2MhR2cCgZJAKYDQNAwltVVOCf <a href="mailto:root@jenkins.example.com" target="_blank" rel="noopener">root@jenkins.example.com</a></p>
<h3 id="4-2-2：添加ssh-key："><a href="#4-2-2：添加ssh-key：" class="headerlink" title="4.2.2：添加ssh key："></a>4.2.2：添加ssh key：</h3><p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643289387.png" alt="1552643289387"></p>
<h3 id="4-2-3：创建ssh-key："><a href="#4-2-3：创建ssh-key：" class="headerlink" title="4.2.3：创建ssh key："></a>4.2.3：创建ssh key：</h3><p><strong>ssh key**</strong>只用于免认证获取代码**</p>
<p><strong>gitlab**</strong>和<strong><strong>jenkins</strong></strong>分别位于<strong> </strong>两个<strong> </strong>服务器**</p>
<p><strong>分别生成公钥私钥</strong></p>
<p><strong>ssh-keygen</strong> <strong>回车三次</strong></p>
<p><strong>cat /root/.ssh/id_rsa</strong></p>
<p><strong>cat /root/.ssh/id_rsa.pub</strong></p>
<p><strong>gitlab**</strong>网页添加<strong><strong>jenkins</strong></strong>服务器端生成的公钥<strong>**id_rsa.pub</strong></p>
<p><strong>jenkins**</strong>网页添加凭证要<strong><strong>jenkins</strong></strong>服务器端生成的私钥<strong>**id_rsa</strong></p>
<p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643308322.png" alt="1552643308322"></p>
<h3 id="4-2-4：测试ssh-key："><a href="#4-2-4：测试ssh-key：" class="headerlink" title="4.2.4：测试ssh key："></a>4.2.4：测试ssh key：</h3><p>测试可以不使用用户名密码后直接获取代码</p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643338278.png" alt="1552643338278"></p>
<h2 id="4-3：配置jenkins自动拉取代码："><a href="#4-3：配置jenkins自动拉取代码：" class="headerlink" title="4.3：配置jenkins自动拉取代码："></a>4.3：配置jenkins自动拉取代码：</h2><h3 id="4-3-1：jenkins-服务器添加证书："><a href="#4-3-1：jenkins-服务器添加证书：" class="headerlink" title="4.3.1：jenkins 服务器添加证书："></a>4.3.1：jenkins 服务器添加证书：</h3><p>Jenkins-凭据-jenkins—全局凭据—添加凭据</p>
<p>   <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643352409.png" alt="1552643352409"></p>
<h3 id="4-3-2：jenkins创建project："><a href="#4-3-2：jenkins创建project：" class="headerlink" title="4.3.2：jenkins创建project："></a>4.3.2：jenkins创建project：</h3><p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643361258.png" alt="1552643361258"></p>
<p>构建一个shell</p>
<p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552649610425.png" alt="1552649610425"> </p>
<h3 id="4-3-3：配置git项目地址和用户："><a href="#4-3-3：配置git项目地址和用户：" class="headerlink" title="4.3.3：配置git项目地址和用户："></a>4.3.3：配置git项目地址和用户：</h3><p>添加完成的证书没有报错表示认证通过</p>
<p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643372081.png" alt="1552643372081"></p>
<h3 id="4-3-4：测试构建项目："><a href="#4-3-4：测试构建项目：" class="headerlink" title="4.3.4：测试构建项目："></a>4.3.4：测试构建项目：</h3><h4 id="4-3-4-1：点击立即构建："><a href="#4-3-4-1：点击立即构建：" class="headerlink" title="4.3.4.1：点击立即构建："></a>4.3.4.1：点击立即构建：</h4><p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643383906.png" alt="1552643383906"></p>
<h4 id="4-3-4-2：验证构建结果："><a href="#4-3-4-2：验证构建结果：" class="headerlink" title="4.3.4.2：验证构建结果："></a>4.3.4.2：验证构建结果：</h4><p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643394758.png" alt="1552643394758"></p>
<h4 id="4-3-4-3：服务器验证数据："><a href="#4-3-4-3：服务器验证数据：" class="headerlink" title="4.3.4.3：服务器验证数据："></a>4.3.4.3：服务器验证数据：</h4><p> <img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552643405100.png" alt="1552643405100"></p>
<h4 id="4-3-4-4：将代码部署至后端服务器："><a href="#4-3-4-4：将代码部署至后端服务器：" class="headerlink" title="4.3.4.4：将代码部署至后端服务器："></a>4.3.4.4：将代码部署至后端服务器：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> jenkins服务器先对后端tomcat服务器做基于tomcat的免密钥登陆</span><br><span class="line">ssh-copy-id -i /root/.ssh/id_rsa.pub tomcat@172.20.102.228</span><br><span class="line">ssh-copy-id -i /root/.ssh/id_rsa.pub tomcat@172.20.102.240</span><br></pre></td></tr></table></figure>
<p>将下列脚本写到Jenkins的web端的代码构建中</p>
<p>脚本内容：</p>
<p>###<br>git clone -b master <a href="mailto:git@172.20.102.205" target="_blank" rel="noopener">git@172.20.102.205</a>:myapp/test-project.git<br>cd /var/lib/jenkins/workspace/demo1/test-project/<br>ssh <a href="mailto:tomcat@172.20.102.228" target="_blank" rel="noopener">tomcat@172.20.102.228</a> “/etc/init.d/tomcat stop”<br>ssh <a href="mailto:tomcat@172.20.102.240" target="_blank" rel="noopener">tomcat@172.20.102.240</a> “/etc/init.d/tomcat stop”<br>scp index.html  <a href="mailto:tomcat@172.20.102.228" target="_blank" rel="noopener">tomcat@172.20.102.228</a>:/data/tomcat_webdir/myapp/<br>scp index.html  <a href="mailto:tomcat@172.20.102.240" target="_blank" rel="noopener">tomcat@172.20.102.240</a>:/data/tomcat_webdir/myapp/<br>ssh <a href="mailto:tomcat@172.20.102.228" target="_blank" rel="noopener">tomcat@172.20.102.228</a> “/etc/init.d/tomcat start”<br>ssh <a href="mailto:tomcat@172.20.102.240" target="_blank" rel="noopener">tomcat@172.20.102.240</a> “/etc/init.d/tomcat start”</p>
<p> 构建之前</p>
<p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552654945805.png" alt="1552654945805"></p>
<p>在gitlib上更新index.html文件并上传</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  255  2019-03-15 20:51:41 root vim index.html</span><br><span class="line">  256  2019-03-15 20:53:10 root git add index.html</span><br><span class="line">  257  2019-03-15 20:53:21 root git commit -m <span class="string">"v1"</span></span><br><span class="line">  258  2019-03-15 20:53:27 root git push</span><br><span class="line">  259  2019-03-15 20:54:01 root cat index.html </span><br><span class="line">  260  2019-03-15 20:54:53 root <span class="built_in">history</span> </span><br><span class="line">[root@gitlab-server <span class="built_in">test</span>-project]<span class="comment"># cat index.html</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552654519301.png" alt="1552654519301"></p>
<p>上传完成后点击立即构建</p>
<p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552654828341.png" alt="1552654828341"></p>
<p>刷新页面，可以看到jenkins已经从gitlab上拉取代码并传到了后端的tomcat服务器上</p>
<p><img src="/2019/03/15/DevOps 之基于Jenkins实现的CI与CD/img/5C1552654976723.png" alt="1552654976723"></p>
<h2 id="4-3：pipline："><a href="#4-3：pipline：" class="headerlink" title="4.3：pipline："></a>4.3：pipline：</h2><p>官方介绍；<a href="https://jenkins.io/2.0/" target="_blank" rel="noopener">https://jenkins.io/2.0/</a> </p>
<p>pipline是帮助Jenkins实现CI到CD转变的重要角色，是运行在jenkins 2.X版本的核心插件，简单来说Pipline就是一套运行于Jenkins上的工作流框架，将原本独立运行于单个或者多个节点的任务连接起来，实现单个任务难以完成的复杂发布流程，从而实现单个任务很难实现的复杂流程编排和任务可视化，Pipeline的实现方式是一套Groovy DSL，任何发布流程都可以表述为一段Groovy脚本。</p>
<h3 id="4-3-1：pipline优势："><a href="#4-3-1：pipline优势：" class="headerlink" title="4.3.1：pipline优势："></a>4.3.1：pipline优势：</h3><p>可持续性：jenkins的重启或者中断后不影响已经执行的Pipline Job</p>
<p>支持暂停：pipline可以选择停止并等待人工输入或批准后再继续执行。</p>
<p>可扩展：通过groovy的编程更容易的扩展插件。</p>
<p>并行执行：通过groovy脚本可以实现step，stage间的并行执行，和更复杂的相互依赖关系。</p>
<h3 id="4-3-2：pipline-语法："><a href="#4-3-2：pipline-语法：" class="headerlink" title="4.3.2：pipline 语法："></a>4.3.2：pipline 语法：</h3><p>Stage：阶段，一个pipline可以划分为若干个stage，每个stage都是一个操作，比如clone代码、代码编译、代码测试和代码部署，阶段是一个逻辑分组，可以跨多个node执行。</p>
<p>Node：节点，每个node都是一个jenkins节点，可以是jenkins  master也可以是jenkins  agent，node是执行step的具体服务器。</p>
<p>Step：步骤，step是jenkins pipline最基本的操作单元，从在服务器创建目录到构建容器镜像，由各类</p>
<p>Jenkins 插件提供实现，例如： sh “make”</p>
<h3 id="4-3-2：pipline-job测试："><a href="#4-3-2：pipline-job测试：" class="headerlink" title="4.3.2：pipline job测试："></a>4.3.2：pipline job测试：</h3><h4 id="4-3-2-1：创建pipline-job："><a href="#4-3-2-1：创建pipline-job：" class="headerlink" title="4.3.2.1：创建pipline job："></a>4.3.2.1：创建pipline job：</h4><h4 id="4-3-2-2：测试简单pipline-job运行："><a href="#4-3-2-2：测试简单pipline-job运行：" class="headerlink" title="4.3.2.2：测试简单pipline job运行："></a>4.3.2.2：测试简单pipline job运行：</h4><p>node {</p>
<p>​    stage(“clone 代码”){</p>
<p>​       echo “代码clone”</p>
<p>​    }</p>
<p>​    stage(“代码构建”){</p>
<p>​       echo “代码构建”</p>
<p>​    }</p>
<p>   stage(“代码测试”){</p>
<p>​       echo “代码测试”</p>
<p>   }</p>
<p>   stage(“代码部署”){</p>
<p>​     echo “代码部署”</p>
<p>   }</p>
<p>}</p>
<h4 id="4-3-2-3：执行pipline-job："><a href="#4-3-2-3：执行pipline-job：" class="headerlink" title="4.3.2.3：执行pipline job："></a>4.3.2.3：执行pipline job：</h4><h4 id="4-3-2-4：生成拉取代码的pipline脚本："><a href="#4-3-2-4：生成拉取代码的pipline脚本：" class="headerlink" title="4.3.2.4：生成拉取代码的pipline脚本："></a>4.3.2.4：生成拉取代码的pipline脚本：</h4><h4 id="4-3-2-5：更改pipline-job："><a href="#4-3-2-5：更改pipline-job：" class="headerlink" title="4.3.2.5：更改pipline job："></a>4.3.2.5：更改pipline job：</h4><p>node {</p>
<p>   stage(“code clone”){</p>
<p>​       echo “git clone”</p>
<p>​       git credentialsId: ‘b695c060-6a99-4ee3-bd4c-730bd4dd36ec’, url: <a href="mailto:&#39;git@192.168.8.3" target="_blank" rel="noopener">&#39;git@192.168.8.3</a>:test-service/test-project.git’</p>
<p>   }</p>
<p>  stage(“code build”){</p>
<p>​      echo “code build”</p>
<p>  }</p>
<p>  stage(“code test”){</p>
<p>​      echo “code test”</p>
<p>  }</p>
<p>  stage(“code deploy”){</p>
<p>​      echo “code deploy”</p>
<p>  }</p>
<p>}</p>
<h4 id="4-3-2-6：执行jenkins-job："><a href="#4-3-2-6：执行jenkins-job：" class="headerlink" title="4.3.2.6：执行jenkins job："></a>4.3.2.6：执行jenkins job：</h4><h4 id="4-3-2-7：验证git-clone日志："><a href="#4-3-2-7：验证git-clone日志：" class="headerlink" title="4.3.2.7：验证git clone日志："></a>4.3.2.7：验证git clone日志：</h4><h4 id="4-3-2-8：服务器验证数据："><a href="#4-3-2-8：服务器验证数据：" class="headerlink" title="4.3.2.8：服务器验证数据："></a>4.3.2.8：服务器验证数据：</h4><h4 id="4-3-2-9：pipline中执行shell-命令："><a href="#4-3-2-9：pipline中执行shell-命令：" class="headerlink" title="4.3.2.9：pipline中执行shell 命令："></a>4.3.2.9：pipline中执行shell 命令：</h4><p>node {</p>
<p>   stage(“code clone”){</p>
<p>​       echo “git clone”</p>
<p>​       git credentialsId: ‘b695c060-6a99-4ee3-bd4c-730bd4dd36ec’, url: <a href="mailto:&#39;git@192.168.8.3" target="_blank" rel="noopener">&#39;git@192.168.8.3</a>:test-service/test-project.git’</p>
<p>​       sh “cd /root/.jenkins/workspace/pipline-test &amp;&amp; tar czvf code.tar.gz ./*”</p>
<p>   }</p>
<p>  stage(“code build”){</p>
<p>​      echo “code build”</p>
<p>  }</p>
<p>  stage(“code test”){</p>
<p>​      echo “code test”</p>
<p>  }</p>
<p>  stage(“code deploy”){</p>
<p>​      echo “code deploy”</p>
<p>  }</p>
<p>}</p>
<h3 id="4-3-3：jenkins-分布式构建："><a href="#4-3-3：jenkins-分布式构建：" class="headerlink" title="4.3.3：jenkins 分布式构建："></a>4.3.3：jenkins 分布式构建：</h3><h4 id="4-3-3-1：添加slave节点："><a href="#4-3-3-1：添加slave节点：" class="headerlink" title="4.3.3.1：添加slave节点："></a>4.3.3.1：添加slave节点：</h4><p>Jenkins—系统管理—节点管理—新建节点：</p>
<p>添加slave节点：</p>
<h4 id="4-3-3-2：配置slave节点："><a href="#4-3-3-2：配置slave节点：" class="headerlink" title="4.3.3.2：配置slave节点："></a>4.3.3.2：配置slave节点：</h4><p>Slave服务器创建工作目录，如果slave需要执行编译job，则也需要配置java环境：</p>
<p>[root@jenkins-slave ~]# yum install java-1.8.0-openjdk –y</p>
<p>[root@jenkins-slave ~]#  mkdir /data/jenkins/slave -pv</p>
<p>mkdir: created directory ‘/data’</p>
<p>mkdir: created directory ‘/data/jenkins’</p>
<p>mkdir: created directory ‘/data/jenkins/slave’</p>
<h4 id="4-3-3-3：添加slave认证凭据："><a href="#4-3-3-3：添加slave认证凭据：" class="headerlink" title="4.3.3.3：添加slave认证凭据："></a>4.3.3.3：添加slave认证凭据：</h4><h3 id="4-3-3-：添加slave节点："><a href="#4-3-3-：添加slave节点：" class="headerlink" title="4.3.3.：添加slave节点："></a>4.3.3.：添加slave节点：</h3><h3 id="4-3-4：jenkins-slave创建日志："><a href="#4-3-4：jenkins-slave创建日志：" class="headerlink" title="4.3.4：jenkins slave创建日志："></a>4.3.4：jenkins slave创建日志：</h3><h3 id="4-3-5：如果slave-java报错如下："><a href="#4-3-5：如果slave-java报错如下：" class="headerlink" title="4.3.5：如果slave java报错如下："></a>4.3.5：如果slave java报错如下：</h3><h3 id="4-3-6：验证slave-状态："><a href="#4-3-6：验证slave-状态：" class="headerlink" title="4.3.6：验证slave 状态："></a>4.3.6：验证slave 状态：</h3><p>正常状态：</p>
<p>时间不同步状态</p>
<h3 id="4-3-7：slave-状态："><a href="#4-3-7：slave-状态：" class="headerlink" title="4.3.7：slave 状态："></a>4.3.7：slave 状态：</h3><h3 id="4-3-8：配置slave执行job："><a href="#4-3-8：配置slave执行job：" class="headerlink" title="4.3.8：配置slave执行job："></a>4.3.8：配置slave执行job：</h3><p>Slave的公钥也要同步到各个web服务器</p>
<p>node(‘slave-node1’){</p>
<p>   stage(“code clone”){</p>
<p>​       echo “git clone”</p>
<p>​       sh “cd /data/jenkins/slave/workspace/pipline-test &amp;&amp; rm -rf ./*”</p>
<p>​       git credentialsId: ‘b695c060-6a99-4ee3-bd4c-730bd4dd36ec’, url: <a href="mailto:&#39;git@192.168.8.3" target="_blank" rel="noopener">&#39;git@192.168.8.3</a>:test-service/test-project.git’</p>
<p>​       sh “cd /data/jenkins/slave/workspace/pipline-test &amp;&amp; tar czvf code.tar.gz ./*”</p>
<p>   }</p>
<p>  stage(“code build”){</p>
<p>​      echo “code build”</p>
<p>  }</p>
<p>  stage(“code test”){</p>
<p>​      echo “code test”</p>
<p>  }</p>
<p>  stage(“code deploy”){</p>
<p>​      echo “code deploy”</p>
<p>  }</p>
<p>}</p>
<h3 id="4-3-9：验证slave执行构建："><a href="#4-3-9：验证slave执行构建：" class="headerlink" title="4.3.9：验证slave执行构建："></a>4.3.9：验证slave执行构建：</h3>
          
        
      
    </div>

    

    
    
    

<div>
  
</div>

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/12/test/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="摩托猿">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/haha.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Apologize's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/12/test/" class="post-title-link" itemprop="http://yoursite.com/index.html">test</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-12 20:19:47 / 修改时间：20:21:48" itemprop="dateCreated datePublished" datetime="2019-03-12T20:19:47+08:00">2019-03-12</time>
            

            
              

              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/03/12/test/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2019/03/12/test/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="/2019/03/12/test/2.jpg" alt="111"></p>

          
        
      
    </div>

    

    
    
    

<div>
  
</div>

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/09/mysql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="摩托猿">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/haha.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Apologize's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/12/09/mysql/" class="post-title-link" itemprop="http://yoursite.com/index.html">mysql</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-09 13:43:48" itemprop="dateCreated datePublished" datetime="2018-12-09T13:43:48+08:00">2018-12-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-12-10 10:37:14" itemprop="dateModified" datetime="2018-12-10T10:37:14+08:00">2018-12-10</time>
              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/12/09/mysql/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/12/09/mysql/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    

    
    
    

<div>
  
</div>

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/03/新装系统后必须做的几件事/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="摩托猿">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/haha.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Apologize's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/12/03/新装系统后必须做的几件事/" class="post-title-link" itemprop="http://yoursite.com/index.html">装centos系统后必须要做的几件事！！！</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-03 18:18:18" itemprop="dateCreated datePublished" datetime="2018-12-03T18:18:18+08:00">2018-12-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-12 20:17:38" itemprop="dateModified" datetime="2019-03-12T20:17:38+08:00">2019-03-12</time>
              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/12/03/新装系统后必须做的几件事/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/12/03/新装系统后必须做的几件事/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>定义习惯用的别名<br></p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2018/12/03/新装系统后必须做的几件事/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
         
          <!--/noindex-->
        
      
    </div>

    

    
    
    

<div>
  
</div>

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/11/各种小工具和小玩意，小火车，黑客代码，国际象棋盘，三角形/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="摩托猿">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/haha.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Apologize's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/11/11/各种小工具和小玩意，小火车，黑客代码，国际象棋盘，三角形/" class="post-title-link" itemprop="http://yoursite.com/index.html">各种小工具和小玩意，小火车，黑客代码，国际象棋盘，三角形</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-11-11 18:18:18" itemprop="dateCreated datePublished" datetime="2018-11-11T18:18:18+08:00">2018-11-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-11-08 21:49:11" itemprop="dateModified" datetime="2018-11-08T21:49:11+08:00">2018-11-08</time>
              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/11/各种小工具和小玩意，小火车，黑客代码，国际象棋盘，三角形/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/11/11/各种小工具和小玩意，小火车，黑客代码，国际象棋盘，三角形/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="笔记本电脑查询已连接WIFI密码"><a href="#笔记本电脑查询已连接WIFI密码" class="headerlink" title="笔记本电脑查询已连接WIFI密码"></a>笔记本电脑查询已连接WIFI密码</h1><p>###本方法适用于忘了WiFi密码或者通过其他手段连上WiFi却不知道密码的<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#按Windows+R，输入cmd启动命令行</span></span><br><span class="line"><span class="comment">#命令行中输入</span></span><br><span class="line">netsh wlan show profiles   <span class="comment">#列出已保存WiFi</span></span><br><span class="line">netsh wlan show profiles name=12345 key=clear </span><br><span class="line"><span class="comment">#即可查询WiFi名称为12345的密码，在安全设置中，密码即为下方关键内容</span></span><br></pre></td></tr></table></figure></p>
<h1 id="Linux下取出指定位的随机密码"><a href="#Linux下取出指定位的随机密码" class="headerlink" title="Linux下取出指定位的随机密码"></a>Linux下取出指定位的随机密码</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /dev/urandom |tr -dc <span class="string">'a-zA-Z0-9_'</span> |head -c12 <span class="comment">#取出12位的随机密码，尾数改变改为8即取8位</span></span><br></pre></td></tr></table></figure>
<h1 id="Linux命令颜色和欢迎界面！"><a href="#Linux命令颜色和欢迎界面！" class="headerlink" title="Linux命令颜色和欢迎界面！"></a>Linux命令颜色和欢迎界面！</h1><p>在全局设置中写入配置</p>
<h3 id="字体颜色和背景设置"><a href="#字体颜色和背景设置" class="headerlink" title="字体颜色和背景设置"></a>字体颜色和背景设置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile.d/env.sh   <span class="comment">#打开配置文件</span></span><br><span class="line">PS1=<span class="string">"\[\e[1;32m\][\u@\h \W]\\$\[\e[0m\]"</span></span><br><span class="line"><span class="comment">#按esc，然后输入wq保存，重新登陆客户端即可</span></span><br></pre></td></tr></table></figure>
<p>如图<br><img src="https://img-blog.csdnimg.cn/20181101113754610.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU1MTE1Mg==,size_16,color_FFFFFF,t_70" alt="111"><br><img src="https://img-blog.csdnimg.cn/20181101113811394.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU1MTE1Mg==,size_16,color_FFFFFF,t_70" alt="1112"><br>可以看到上面两图命令颜色变成了绿色<br>那么欢迎界面怎么设置呢？</p>
<h2 id="欢迎界面"><a href="#欢迎界面" class="headerlink" title="欢迎界面"></a>欢迎界面</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/motd   <span class="comment">#打开配置文件,复制下面的字符</span></span><br><span class="line"></span><br><span class="line">                                                     /*[*/<span class="comment">#include&lt;stdio.h&gt;//</span></span><br><span class="line">                         <span class="comment">#include&lt;stdlib.h&gt;//]++++[-&gt;++[-&gt;+&gt;++++&lt;&lt;]&lt;][(c)2013]</span></span><br><span class="line">                        <span class="comment">#ifndef                                           e//[o</span></span><br><span class="line">                       <span class="comment">#include&lt;string.h&gt;//]![misaka.c,size=3808,crc=d0ec3b36][</span></span><br><span class="line">                      <span class="comment">#define e                                           0x1//</span></span><br><span class="line">                     typedef struct&#123;int d,b,o,P;char*q,*p;&#125;f;int p,q,d,b,_=0//|</span><br><span class="line">                  <span class="comment">#include __FILE__//]&gt;&gt;&gt;[-&gt;+&gt;++&lt;&lt;]&lt;[-&lt;&lt;+&gt;&gt;&gt;++&lt;]&gt;&gt;+MISAKA*IMOUTO</span></span><br><span class="line">                <span class="comment">#undef e//[-&gt;[-&lt;&lt;+&lt;+&lt;+&gt;&gt;&gt;&gt;]&lt;&lt;&lt;&lt;&lt;++[-&gt;&gt;+&gt;&gt;&gt;+&lt;&lt;&lt;&lt;&lt;]&gt;+&gt;+++&gt;+++[&gt;]]b</span></span><br><span class="line">             <span class="comment">#define e(c)/**/if((_!=__LINE__?(_=__LINE__):0))&#123;c;&#125;//[20002,+[-.+]</span></span><br><span class="line">            ,O,i=0,Q=sizeof(f);static f*P;static FILE*t;static const char*o[]=&#123;//</span><br><span class="line">          <span class="string">"\n\40\"8oCan\40not\40open %s\n\0aaFbfeccdeaEbgecbbcda6bcedd#e(bbed<span class="variable">$bbd</span>"</span>,</span><br><span class="line">        <span class="string">"a6bgcdbbccd#ead<span class="variable">$c</span>%bcdea7bccde*b<span class="variable">$eebbdda9bsdbeccdbbecdcbbcceed</span>#eaa&amp;bae<span class="variable">$cbe</span>"</span>,</span><br><span class="line">       <span class="string">"e&amp;cbdd<span class="variable">$eldbdeedbbdede</span>)bdcdea&amp;bbde1bedbbcc&amp;b#ccdee&amp;bdcdea'bbcd)e'bad(bae&amp;bccd"</span>,</span><br><span class="line">      <span class="string">"e&amp;bbda1bdcdee<span class="variable">$bbce</span>#b<span class="variable">$c</span>&amp;bdedcd%ecdca4bhcdeebbcd#e<span class="variable">$b</span>#ecdcc<span class="variable">$bccda7bbcc</span>#e#d%c*bbda"</span>,</span><br><span class="line">     <span class="string">"&gt;bad/bbda"</span>&#125;;static int <span class="function"><span class="title">S</span></span>()&#123;<span class="built_in">return</span>(o[p][q]);&#125;static/**/int/**/Z=0  ;void/**/z(int//</span><br><span class="line">    l)&#123;<span class="keyword">if</span>(/**/Z<span class="_">-l</span>)&#123;Z=l;q++;<span class="keyword">if</span>(p&lt;b*5&amp;&amp;!S())&#123;p+=b;q=0;&#125;&#125;&#125;int main(int I,    /**/char**l)&#123;//</span><br><span class="line">   d=sizeof(f*);<span class="keyword">if</span>(1&lt;(O=_))&#123;b=((sizeof(o)/sizeof(char*))-1)/4;q=22; p=     0;<span class="keyword">while</span>(p&lt;b*5)&#123;</span><br><span class="line">  /*&lt;*/<span class="keyword">if</span>(Z-1)&#123;d=S()&gt;96;i=S()-(d?96:32) ;q++;<span class="keyword">if</span>(p&lt;b*5&amp;&amp;!S())&#123;p+=b;  q=      0;&#125;Z=1;&#125;/*[[*/</span><br><span class="line">  <span class="keyword">while</span>(i)&#123;_=o[0][S()-97];I=_-10?b:1;   <span class="keyword">for</span>( ;I--;)putchar(_ );<span class="keyword">if</span>   (!      --i||d)z(~i );&#125;</span><br><span class="line"> <span class="keyword">if</span>(p==b*5&amp;&amp;O)&#123;p-=b;O--;&#125;&#125;<span class="built_in">return</span> 0U;   &#125;<span class="keyword">if</span>(! (P=( f*)calloc /*]*/  (Q        ,I)))<span class="built_in">return</span> 1;</span><br><span class="line"> &#123;;&#125;<span class="keyword">for</span>(_=p=1;p&lt;I;p++)&#123;e(q=1);<span class="keyword">while</span>    (q&lt;   p&amp;&amp;  strcmp(  l[p     ]         ,l[(q)]))++  q;</span><br><span class="line"> t=stdin;<span class="keyword">if</span>(q&lt;p)&#123;(void)memcpy/* <span class="string">"      */    (&amp;P  [p],&amp;P   [q     ]          ,Q);continue ;&#125;</span></span><br><span class="line"><span class="string">if(strcmp(l[p],"</span>-<span class="string">"))&#123;t=fopen(l         [     p]   ,"</span>rb<span class="string">"   )                  ;if(!t )&#123;&#123;;&#125;  ;</span></span><br><span class="line"><span class="string">printf(05+*o,l[p ]);return+1;                      &#123;;&#125;                       &#125;&#125;_=b= 1&lt;&lt;16   ;</span></span><br><span class="line"><span class="string">*&amp;O=5;do&#123;if(!(P[p].q=realloc   (P[p].q,(P[p].P     +=       b)+1)))&#123;return   01;&#125;O   &amp;=72   /</span></span><br><span class="line"><span class="string">6/*][*/;P[p].o+=d=fread(P[p]      .q       +P[     p           ].       o,  1,b,t)   ;&#125;//</span></span><br><span class="line"><span class="string"> while(d==b)      ;P [p].q[       P[       p]                  .o       ]=  012;d    =0;</span></span><br><span class="line"><span class="string"> e(fclose(t        )  );P         [p]      .p                  =P[      p]  .q;if    (O)</span></span><br><span class="line"><span class="string"> &#123;for(;d&lt;P[            p]          .o     ;d=                   q+     1)    &#123;q=     d;</span></span><br><span class="line"><span class="string">  while(q&lt;P[                        p].o&amp;&amp;P[                    p].q[q]-     10     )&#123;</span></span><br><span class="line"><span class="string">  q++;&#125;b=q-d;                         _=P                         [p].        d     ;</span></span><br><span class="line"><span class="string">  if(b&gt;_)&#123;/*]b                                                                */</span></span><br><span class="line"><span class="string">   P[p].d=b;&#125;&#123;;                                                                &#125;</span></span><br><span class="line"><span class="string">   #undef/*pqdz'.*/  e//                                                      ;</span></span><br><span class="line"><span class="string">   #define/*s8qdb]*/e/**/0                                                   //</span></span><br><span class="line"><span class="string">   //&lt;&lt;.&lt;&lt;.----.&gt;.&lt;&lt;.&gt;++.++&lt;                                              .[&gt;]</span></span><br><span class="line"><span class="string">   /*P[*/P[p].b++;continue;&#125;&#125;&#125;t=                                       stdout;</span></span><br><span class="line"><span class="string">  for (p=1;p&lt;I;p++)&#123;/**/if(P[p].b&gt;i                               )&#123;i=P[p].b;&#125;&#125;</span></span><br><span class="line"><span class="string"> if  (O)&#123;for(p=0;p&lt;i;p++)&#123;q=0;/*[*/while(I               &gt;++q)&#123;_=P[q].p-P[q ].q;</span></span><br><span class="line"><span class="string">b=   0;if(_&lt;P[q ].o)&#123;while(012-*P[q].p)     &#123;putchar(*(P[q].p++));b++;&#125;P[q]. p++;</span></span><br><span class="line"><span class="string">&#125;   ;while (P[  q].d&gt;b++)putchar(040);&#125;             putchar(10);&#125;return 0;&#125;p   =1;</span></span><br><span class="line"><span class="string">   for(;   p&lt;I   ;p++)fwrite(P[p] .q,P[              p].o,1,t);return 0 ;&#125;//</span></span><br><span class="line"><span class="string">  #/*]     ]&lt;.    [-]&lt;[-]&lt;[- ]&lt;[    -]&lt;               [-  ]&lt;;*/elif  e    //b</span></span><br><span class="line"><span class="string"> |(1        &lt;&lt;     ( __LINE__        /*               &gt;&gt;   `*//45))  |     01U</span></span><br><span class="line"><span class="string">             #                       /*               */     endif            //</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#按esc，然后输入wq保存，重新登陆客户端即可</span></span><br></pre></td></tr></table></figure>
<p>或者复制这个<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">▽</span><br><span class="line">                              _.._        ,------------.                                                        </span><br><span class="line">                           ,&apos;      `.    ( I want you! )</span><br><span class="line">                          /  __) __` \    `-,----------&apos;</span><br><span class="line">                         (  (`-`(-&apos;)  ) _.-&apos;</span><br><span class="line">                         /)  \  = /  (</span><br><span class="line">                        /&apos;    |--&apos; .  \</span><br><span class="line">                       (  ,---|  `-.)__`</span><br><span class="line">                        )(  `-.,--&apos;   _`-.</span><br><span class="line">                       &apos;/,&apos;          (  Uu&quot;,</span><br><span class="line">                        (_       ,    `/,-&apos; )</span><br><span class="line">                        `.__,  : `-&apos;/  /`--&apos;</span><br><span class="line">                          |     `--&apos;  |</span><br><span class="line">                          `   `-._   /</span><br><span class="line">                           \        (</span><br><span class="line">                           /\ .      \.</span><br><span class="line">                          / |` \     ,-\</span><br><span class="line">                         /  \| .)   /   \</span><br><span class="line">                        ( ,&apos;|\    ,&apos;     :</span><br><span class="line">                        | \,`.`--&quot;/      &#125;</span><br><span class="line">                        `,&apos;    \  |,&apos;    /</span><br><span class="line">                       / &quot;-._   `-/      |</span><br><span class="line">                       &quot;-.   &quot;-.,&apos;|     ;</span><br><span class="line">                      /        _/[&quot;---&apos;&quot;&quot;]</span><br><span class="line">                     :        /  |&quot;-     &apos;</span><br><span class="line">                     &apos;           |      /</span><br><span class="line">                                 `      |</span><br><span class="line">~</span><br></pre></td></tr></table></figure></p>
<h1 id="在centos下用cmatrix做出×××屏幕代码雨效果"><a href="#在centos下用cmatrix做出×××屏幕代码雨效果" class="headerlink" title="在centos下用cmatrix做出×××屏幕代码雨效果"></a>在centos下用cmatrix做出×××屏幕代码雨效果</h1><p>文章出处：</p>
<p><a href="http://blog.51cto.com/5232821/2146115" target="_blank" rel="noopener">http://blog.51cto.com/5232821/2146115</a>      作者：hubbywen0<br><strong>1、下载cmatrix-1.2a.tar.gz文件</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># wget https://jaist.dl.sourceforge.net/project/cmatrix/cmatrix/1.2a/cmatrix-1.2a.tar.gz    #centos 下载不了此安装包，需自行下载到本地，rz上传到Linux系统</span></span><br><span class="line">--2018-07-17 15:06:03--  https://jaist.dl.sourceforge.net/project/cmatrix/cmatrix/1.2a/cmatrix-1.2a.tar.gz</span><br><span class="line">Resolving jaist.dl.sourceforge.net (jaist.dl.sourceforge.net)... 150.65.7.130, 2001:df0:2ed:feed::feed</span><br><span class="line">Connecting to jaist.dl.sourceforge.net (jaist.dl.sourceforge.net)|150.65.7.130|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 74376 (73K) [application/x-gzip]</span><br><span class="line">Saving to: ‘cmatrix-1.2a.tar.gz’</span><br><span class="line"></span><br><span class="line">100%[=====================================================&gt;] 74,376      4.68KB/s   <span class="keyword">in</span> 16s    </span><br><span class="line"></span><br><span class="line">2018-07-17 15:06:20 (4.68 KB/s) - ‘cmatrix-1.2a.tar.gz’ saved [74376/74376]</span><br></pre></td></tr></table></figure></p>
<p><strong>2、解压缩cmatrix-1.2a.tar.gz文件</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># tar xvf cmatrix-1.2a.tar.gz</span></span><br><span class="line">cmatrix-1.2a/</span><br><span class="line">cmatrix-1.2a/NEWS</span><br><span class="line">cmatrix-1.2a/TODO</span><br><span class="line">cmatrix-1.2a/aclocal.m4</span><br><span class="line">cmatrix-1.2a/README</span><br><span class="line">cmatrix-1.2a/configure</span><br><span class="line">cmatrix-1.2a/configure.in</span><br><span class="line">cmatrix-1.2a/cmatrix.1</span><br><span class="line">cmatrix-1.2a/cmatrix.c</span><br><span class="line">cmatrix-1.2a/config.guess</span><br><span class="line">cmatrix-1.2a/install-sh</span><br><span class="line">cmatrix-1.2a/cmatrix.spec</span><br><span class="line">cmatrix-1.2a/cmatrix.spec.in</span><br><span class="line">cmatrix-1.2a/matrix.fnt</span><br><span class="line">cmatrix-1.2a/config.sub</span><br><span class="line">cmatrix-1.2a/missing</span><br><span class="line">cmatrix-1.2a/mkinstalldirs</span><br><span class="line">cmatrix-1.2a/Makefile.am</span><br><span class="line">cmatrix-1.2a/Makefile.in</span><br><span class="line">cmatrix-1.2a/mtx.pcf</span><br><span class="line">cmatrix-1.2a/config.h.in</span><br><span class="line">cmatrix-1.2a/matrix.psf.gz</span><br><span class="line">cmatrix-1.2a/stamp-h.in</span><br><span class="line">cmatrix-1.2a/AUTHORS</span><br><span class="line">cmatrix-1.2a/INSTALL</span><br><span class="line">cmatrix-1.2a/ChangeLog</span><br><span class="line">cmatrix-1.2a/acconfig.h</span><br><span class="line">cmatrix-1.2a/COPYING</span><br></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cd cmatrix-1.2a</span></span><br><span class="line"></span><br><span class="line">[root@localhost cmatrix-1.2a]<span class="comment"># yum install ncurses-deve</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">[root@bogon cmatrix-1.2a]<span class="comment"># ./configure &amp;&amp; make &amp;&amp; make install</span></span><br><span class="line">loading cache ./config.cache</span><br><span class="line">checking <span class="keyword">for</span> a BSD compatible install... /usr/bin/install -c</span><br><span class="line">checking whether build environment is sane... yes</span><br><span class="line">checking whether make sets <span class="variable">$&#123;MAKE&#125;</span>... yes</span><br><span class="line">checking <span class="keyword">for</span> working aclocal... missing</span><br><span class="line">checking <span class="keyword">for</span> working autoconf... missing</span><br><span class="line">checking <span class="keyword">for</span> working automake... missing</span><br><span class="line">checking <span class="keyword">for</span> working autoheader... missing</span><br><span class="line">checking <span class="keyword">for</span> working makeinfo... missing</span><br><span class="line">checking <span class="keyword">for</span> gcc... no</span><br><span class="line">checking <span class="keyword">for</span> cc... no</span><br><span class="line">configure: error: no acceptable cc found <span class="keyword">in</span> <span class="variable">$PATH</span></span><br><span class="line"></span><br><span class="line">当执行“./configure &amp;&amp; make &amp;&amp; make install ”命令出现如上信息时，表示没有安装gcc，gcc安装过程如下</span><br><span class="line">[root@bogon cmatrix-1.2a]<span class="comment"># yum -y install gcc</span></span><br><span class="line">[root@bogon cmatrix-1.2a]<span class="comment"># yum -y install gcc-c++</span></span><br><span class="line">[root@bogon cmatrix-1.2a]<span class="comment"># yum install make</span></span><br><span class="line"></span><br><span class="line">安装完后再运行“./configure &amp;&amp; make &amp;&amp; make install ”命令，如下：</span><br><span class="line">[root@localhost cmatrix-1.2a]<span class="comment"># ./configure &amp;&amp; make &amp;&amp; make install</span></span><br><span class="line">creating cache ./config.cache</span><br><span class="line">checking <span class="keyword">for</span> a BSD compatible install... /usr/bin/install -c</span><br><span class="line">checking whether build environment is sane... yes</span><br><span class="line">checking whether make sets <span class="variable">$&#123;MAKE&#125;</span>... yes</span><br><span class="line">checking <span class="keyword">for</span> working aclocal... missing</span><br><span class="line">checking <span class="keyword">for</span> working autoconf... missing</span><br><span class="line">checking <span class="keyword">for</span> working automake... missing</span><br><span class="line">checking <span class="keyword">for</span> working autoheader... missing</span><br><span class="line">checking <span class="keyword">for</span> working makeinfo... missing</span><br><span class="line">checking <span class="keyword">for</span> gcc... gcc</span><br><span class="line">checking whether the C compiler (gcc  ) works... yes</span><br><span class="line">checking whether the C compiler (gcc  ) is a cross-compiler... no</span><br><span class="line">checking whether we are using GNU C... yes</span><br><span class="line">checking whether gcc accepts -g... yes</span><br><span class="line">checking <span class="keyword">for</span> a BSD compatible install... /usr/bin/install -c</span><br><span class="line">checking whether make sets <span class="variable">$&#123;MAKE&#125;</span>... (cached) yes</span><br><span class="line">checking <span class="keyword">for</span> main <span class="keyword">in</span> -lncurses... yes</span><br><span class="line">checking how to run the C preprocessor... gcc -E</span><br><span class="line">checking <span class="keyword">for</span> ANSI C header files... yes</span><br><span class="line">checking <span class="keyword">for</span> fcntl.h... yes</span><br><span class="line">checking <span class="keyword">for</span> sys/ioctl.h... yes</span><br><span class="line">checking <span class="keyword">for</span> unistd.h... yes</span><br><span class="line">checking <span class="keyword">for</span> termios.h... yes</span><br><span class="line">checking <span class="keyword">for</span> termio.h... yes</span><br><span class="line">checking <span class="built_in">return</span> <span class="built_in">type</span> of signal handlers... void</span><br><span class="line">checking <span class="keyword">for</span> putenv... yes</span><br><span class="line">checking <span class="keyword">for</span> curses.h... yes</span><br><span class="line">checking <span class="keyword">for</span> ncurses.h... yes</span><br><span class="line">checking <span class="keyword">for</span> tgetent <span class="keyword">in</span> -lncurses... yes</span><br><span class="line">Using ncurses as the termcap library</span><br><span class="line">checking <span class="keyword">for</span> use_default_colors <span class="keyword">in</span> -lncurses... yes</span><br><span class="line">checking <span class="keyword">for</span> resizeterm <span class="keyword">in</span> -lncurses... yes</span><br><span class="line">checking <span class="keyword">for</span> wresize <span class="keyword">in</span> -lncurses... yes</span><br><span class="line">checking <span class="keyword">for</span> consolechars... no</span><br><span class="line">checking <span class="keyword">for</span> setfont... /usr/bin/setfont</span><br><span class="line">checking <span class="keyword">for</span> /usr/lib/kbd/consolefonts... yes</span><br><span class="line">checking <span class="keyword">for</span> /usr/share/consolefonts... no</span><br><span class="line">checking <span class="keyword">for</span> mkfontdir... no</span><br><span class="line">checking <span class="keyword">for</span> /usr/lib/X11/fonts/misc... no</span><br><span class="line">checking <span class="keyword">for</span> /usr/X11R6/lib/X11/fonts/misc... no</span><br><span class="line">configure: warning:  </span><br><span class="line"></span><br><span class="line">*** You <span class="keyword">do</span> not appear to have an X window fonts directory <span class="keyword">in</span> the standard</span><br><span class="line">*** locations (/usr/lib/X11/fonts/misc or /usr/X11R6/lib/X11/fonts/misc). The</span><br><span class="line">*** mtx.pcf font will not be installed.  This means you will probably not</span><br><span class="line">*** be able to use the mtx fonts <span class="keyword">in</span> your x terminals, and hence be unable</span><br><span class="line">*** to use the -x <span class="built_in">command</span> line switch.  Sorry about that...</span><br><span class="line"></span><br><span class="line">updating cache ./config.cache</span><br><span class="line">creating ./config.status</span><br><span class="line">creating Makefile</span><br><span class="line">creating cmatrix.spec</span><br><span class="line">creating config.h</span><br><span class="line">gcc -DHAVE_CONFIG_H -I. -I. -I.     -g -O2 -Wall -Wno-comment -c cmatrix.c</span><br><span class="line">gcc  -g -O2 -Wall -Wno-comment  -o cmatrix  cmatrix.o  -lncurses  -lncurses</span><br><span class="line">make[1]: Entering directory `/root/cmatrix-1.2a<span class="string">'</span></span><br><span class="line"><span class="string">/bin/sh ./mkinstalldirs /usr/local/bin</span></span><br><span class="line"><span class="string">  /usr/bin/install -c  cmatrix /usr/local/bin/cmatrix</span></span><br><span class="line"><span class="string">make  install-man1</span></span><br><span class="line"><span class="string">make[2]: Entering directory `/root/cmatrix-1.2a'</span></span><br><span class="line">/bin/sh ./mkinstalldirs /usr/<span class="built_in">local</span>/man/man1</span><br><span class="line">mkdir /usr/<span class="built_in">local</span>/man</span><br><span class="line">mkdir /usr/<span class="built_in">local</span>/man/man1</span><br><span class="line">/usr/bin/install -c -m 644 ./cmatrix.1 /usr/<span class="built_in">local</span>/man/man1/cmatrix.1</span><br><span class="line">make[2]: Leaving directory `/root/cmatrix-1.2a<span class="string">'</span></span><br><span class="line"><span class="string">Installing matrix fonts in /usr/lib/kbd/consolefonts...</span></span><br><span class="line"><span class="string">make[1]: Leaving directory `/root/cmatrix-1.2a'</span></span><br><span class="line"></span><br><span class="line">**到此，cmatrix安装完成，任意路径，输入cmatrix运行，按q退出。效果如下**</span><br><span class="line">[root@localhost cmatrix-1.2a]<span class="comment"># cmatrix</span></span><br><span class="line">![](http://i2.51cto.com/images/blog/201807/17/abaa3c9ee4b6cf559c3db8173c2cd2bc.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=)</span><br><span class="line"></span><br><span class="line">cmatrix常用命令如下:</span><br><span class="line">-a :异步滚动（默认）</span><br><span class="line">-b :随机粗体</span><br><span class="line">-B :全部粗体</span><br><span class="line">-o :使用旧风格滚动</span><br><span class="line">-x :X window 模式</span><br><span class="line">-V :显示版本信息</span><br><span class="line">-u :刷新频率，0-9，也就是滚动的快慢（值越小越快）</span><br><span class="line">-C :显示的颜色，支持green(默认),red,blue,white,yellow,cyan,magenta and black</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># cmatrix -b -u 3 -C yellow</span></span><br><span class="line">![](http://i2.51cto.com/images/blog/201807/17/4a2e39f2aa2889910d633b6bfb92d18f.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=)</span><br></pre></td></tr></table></figure>
<h1 id="Linux上sl工具安装（小火车）"><a href="#Linux上sl工具安装（小火车）" class="headerlink" title="Linux上sl工具安装（小火车）"></a>Linux上sl工具安装（小火车）</h1><p>centos7上跑火车代码<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget http://mirror.centos.org/centos/7/extras/x86_64/Packages/epel-release-7-9.noarch.rpm</span><br><span class="line">yum install -y epel-release-7-9.noarch.rpm</span><br><span class="line">yum install -y sl</span><br><span class="line">sl   <span class="comment">#运行程序</span></span><br></pre></td></tr></table></figure></p>
<p>centos6上跑火车代码<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget http://mirror.centos.org/centos-6/6.10/extras/x86_64/Packages/epel-release-6-8.noarch.rpm</span><br><span class="line">yum install -y epel-release-6-8.noarch.rpm</span><br><span class="line">yum install -y sl</span><br><span class="line">sl</span><br></pre></td></tr></table></figure></p>
<p>结果如图：<br><img src="https://img-blog.csdnimg.cn/20181101230105477.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU1MTE1Mg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="打出一个指定行与列的矩形，并使其边框闪烁"><a href="#打出一个指定行与列的矩形，并使其边框闪烁" class="headerlink" title="打出一个指定行与列的矩形，并使其边框闪烁"></a>打出一个指定行与列的矩形，并使其边框闪烁</h1><p>如图：<br><img src="https://img-blog.csdnimg.cn/20181106154559195.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU1MTE1Mg==,size_16,color_FFFFFF,t_70" alt="矩形"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#********************************************************************</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"please input colume: "</span>  col</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"please input line: "</span>  line</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `seq <span class="variable">$line</span>`;<span class="keyword">do</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> `seq <span class="variable">$col</span>`;<span class="keyword">do</span></span><br><span class="line">                <span class="comment">#if [ $i -eq 1 -o $i -eq $line -o $j -eq 1 -o $j -eq $col ];then</span></span><br><span class="line">                <span class="comment">#如果当前行等于1或者等于行号line，或者当前列等于1或者等于列号col，则</span></span><br><span class="line">                <span class="comment">#       COLOR=$[RANDOM%7+31]</span></span><br><span class="line">                <span class="comment">#       echo -e "\033[1;5;$&#123;COLOR&#125;m*\033[0m\c"</span></span><br><span class="line">                <span class="comment">#else</span></span><br><span class="line">                <span class="comment">#       echo -e "*\c"</span></span><br><span class="line">                <span class="comment">#fi   以上方法为if语句，下面为case语句，都可实现</span></span><br><span class="line">                <span class="keyword">case</span> <span class="variable">$i</span> <span class="keyword">in</span></span><br><span class="line">                1|<span class="variable">$line</span>)</span><br><span class="line">                        COLOR=$[RANDOM%7+31]</span><br><span class="line">                        <span class="built_in">echo</span> -e <span class="string">"\033[1;5;<span class="variable">$&#123;COLOR&#125;</span>m*\033[0m\c"</span></span><br><span class="line">                        ;;</span><br><span class="line">                *)</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">case</span> <span class="variable">$j</span> <span class="keyword">in</span></span><br><span class="line">                        1|<span class="variable">$col</span>)</span><br><span class="line">                                COLOR=$[RANDOM%7+31]</span><br><span class="line">                                <span class="built_in">echo</span> -e <span class="string">"\033[1;5;<span class="variable">$&#123;COLOR&#125;</span>m*\033[0m\c"</span></span><br><span class="line">                                ;;</span><br><span class="line">                        *)</span><br><span class="line">                                <span class="built_in">echo</span> -e <span class="string">"*\c"</span> </span><br><span class="line">                        <span class="keyword">esac</span></span><br><span class="line">                <span class="keyword">esac</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        <span class="built_in">echo</span> </span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<h1 id="实验：输入一个行号，打印一个等腰三角形"><a href="#实验：输入一个行号，打印一个等腰三角形" class="headerlink" title="实验：输入一个行号，打印一个等腰三角形"></a>实验：输入一个行号，打印一个等腰三角形</h1><p>如图：<br><img src="https://img-blog.csdnimg.cn/20181106160700716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU1MTE1Mg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#********************************************************************</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Please input line: "</span> line</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `seq <span class="variable">$line</span>`;<span class="keyword">do</span></span><br><span class="line">        <span class="built_in">let</span> star=<span class="variable">$i</span>*2-1</span><br><span class="line">        <span class="built_in">let</span> space=<span class="variable">$line</span>-<span class="variable">$i</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> `seq <span class="variable">$space</span>`;<span class="keyword">do</span></span><br><span class="line">                <span class="built_in">echo</span> -n <span class="string">" "</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> `seq <span class="variable">$star</span>`;<span class="keyword">do</span></span><br><span class="line">                <span class="built_in">echo</span> -n <span class="string">"*"</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        <span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<h1 id="选菜菜单"><a href="#选菜菜单" class="headerlink" title="选菜菜单"></a>选菜菜单</h1><p>PS3=”Please input a number:”<br>select MENU in lamian huimian gaifan jiaozi baozi quit;do<br>        case $REPLY in<br>        1|2)<br>                echo “The price is 15元”<br>                ;;<br>        3|5)<br>                echo “The price is 20元”<br>                ;;<br>        4)<br>                echo “The price is 25元”<br>        ;;<br>        6)<br>                echo “bye”<br>                break<br>                ;;<br>        *)<br>                echo “Input false”<br>        esac<br>done</p>
<h1 id="九九乘法表"><a href="#九九乘法表" class="headerlink" title="九九乘法表"></a>九九乘法表</h1><p>打印出九九乘法表<br>例如<br><img src="https://img-blog.csdnimg.cn/20181106161952387.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU1MTE1Mg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..9&#125;;<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> $(seq <span class="variable">$i</span>);<span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> -en <span class="string">"<span class="variable">$&#123;i&#125;</span>X<span class="variable">$&#123;j&#125;</span>=$[<span class="variable">$i</span>*<span class="variable">$j</span>]\t"</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p>
<h1 id="打印出国际象棋棋盘"><a href="#打印出国际象棋棋盘" class="headerlink" title="打印出国际象棋棋盘"></a>打印出国际象棋棋盘</h1><p><img src="https://img-blog.csdnimg.cn/20181106162358832.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU1MTE1Mg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#！bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..8&#125;;<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> &#123;1..8&#125;;<span class="keyword">do</span></span><br><span class="line">        flag=$[(j+i)%2]</span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$flag</span> -eq 0 ];<span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> -e <span class="string">"\033[47m  \033[0m\c"</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> -e <span class="string">"  \c"</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

<div>
  
</div>

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/08/谷歌chrome浏览器自动启用flash/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="摩托猿">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/haha.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Apologize's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/11/08/谷歌chrome浏览器自动启用flash/" class="post-title-link" itemprop="http://yoursite.com/index.html">谷歌chrome浏览器自动启用flash</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-11-08 18:18:18 / 修改时间：21:09:00" itemprop="dateCreated datePublished" datetime="2018-11-08T18:18:18+08:00">2018-11-08</time>
            

            
              

              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/08/谷歌chrome浏览器自动启用flash/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/11/08/谷歌chrome浏览器自动启用flash/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>新版的chrome浏览器不支持启用flash插件了，这也导致有时候打开视频或者微博上传图片时，浏览器提示你flash未启用或者版本过低，这时就算你再下载安装Adobe Flash Player也是不管用的。</p>
<p>这时我们先去chrome实验室界面<br>在地址栏输入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chrome://flags/#enable-ephemeral-flash-permission</span><br></pre></td></tr></table></figure></p>
<p>选择取消Disabled。取消该实验室选项，如下图：<img src="https://img-blog.csdnimg.cn/20181108192236425.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU1MTE1Mg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>然后去在地址栏输入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chrome://settings/content/flash</span><br></pre></td></tr></table></figure></p>
<p>在下面的允许选项添加<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://*</span><br><span class="line">https://*</span><br></pre></td></tr></table></figure></p>
<p>如图：<br><img src="https://img-blog.csdnimg.cn/20181108192520934.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU1MTE1Mg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>并且退出浏览器之后不会不保存，Flash选项。<br>此时重启浏览器，你就发现微博上传图片就可以正常使用了<br><img src="https://img-blog.csdnimg.cn/20181108192648655.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU1MTE1Mg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>

          
        
      
    </div>

    

    
    
    

<div>
  
</div>

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/10/21/shell防止黑客攻击/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="摩托猿">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/haha.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Apologize's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/21/shell防止黑客攻击/" class="post-title-link" itemprop="http://yoursite.com/index.html">shell防止黑客攻击</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-21 18:18:18" itemprop="dateCreated datePublished" datetime="2018-10-21T18:18:18+08:00">2018-10-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-11-08 21:08:47" itemprop="dateModified" datetime="2018-11-08T21:08:47+08:00">2018-11-08</time>
              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/10/21/shell防止黑客攻击/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/10/21/shell防止黑客攻击/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="shell防止黑客攻击"><a href="#shell防止黑客攻击" class="headerlink" title="shell防止黑客攻击"></a>shell防止黑客攻击</h1><p><img src="https://img-blog.csdnimg.cn/20181106170929109.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU1MTE1Mg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!bin/bash</span></span><br><span class="line"><span class="comment">#********************************************************************</span></span><br><span class="line"><span class="keyword">while</span> : ;<span class="keyword">do</span></span><br><span class="line">        iplist=`who | sed -rn <span class="string">'/^cracker/s/.*\((.*)\)/\1/p'</span>`    <span class="comment">#取出以cracker开头的黑客IP地址</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="string">"<span class="variable">$iplist</span>"</span> ] ;<span class="keyword">then</span></span><br><span class="line">                pkill -9 -U cracker </span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"cracker is killed"</span></span><br><span class="line">                <span class="built_in">echo</span> sshd:<span class="variable">$iplist</span> &gt;&gt; /etc/hosts.deny    <span class="comment">#将拦截的IP放到配置文件中，禁止下次连接</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        sleep  10</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

<div>
  
</div>

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/haha.gif"
                alt="摩托猿" />
            
              <p class="site-author-name" itemprop="name">摩托猿</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">36</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                    <span class="site-state-item-count">1</span>
                    <span class="site-state-item-name">分类</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">8</span>
                    <span class="site-state-item-name">标签</span>
                  
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="https://www.lh1.ink/whoami/" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/lululuhao" title="GitHub &rarr; https://github.com/lululuhao" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:htluhao@163.com" title="E-Mail &rarr; mailto:htluhao@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://music.163.com/#/user/home?id=544125923" title="CloudMusic &rarr; https://music.163.com/#/user/home?id=544125923" rel="noopener" target="_blank"><i class="fa fa-fw fa-music"></i>CloudMusic</a>
                </span>
              
            </div>
          

          

          
          
          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; 2016 – <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">摩托猿</span>

  

  
</div>

<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_pv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>







<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共86.4k字</span>
</div>

        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>






















  





  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script id="ribbon" type="text/javascript" size="300" alpha="0.6"  zIndex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.6.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.6.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.6.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.6.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.6.0"></script>



  



  








  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  
  
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(function (item) {
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'vk3KaAky0698trITaDye8Tul-gzGzoHsz',
        appKey: '3KISEUBblfzGHUAGvFxJvEyo',
        placeholder: 'Just go go',
        avatar:'mm',
        meta:guest,
        pageSize:'10' || 10,
        visitor: false
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      
        // ref: https://github.com/ForbesLindesay/unescape-html
        var unescapeHtml = function(html) {
          return String(html)
            .replace(/&quot;/g, '"')
            .replace(/&#39;/g, '\'')
            .replace(/&#x3A;/g, ':')
            // replace all the other &#x; chars
            .replace(/&#(\d+);/g, function (m, p) { return String.fromCharCode(p); })
            .replace(/&lt;/g, '<')
            .replace(/&gt;/g, '>')
            .replace(/&amp;/g, '&');
        };
      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                content = unescapeHtml(content);
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  
  

  

  

  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
